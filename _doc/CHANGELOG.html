<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="theme-color" content="#375EAB" />

		<title>CHANGELOG</title>

		<style>
		
body {
	margin: 0;
	font-family: Arial, sans-serif;
	background-color: #fff;
	line-height: 1.3;
	text-align: center;
	color: #222;
}
pre,
code {
	font-family: Menlo, monospace;
	font-size: 0.875rem;
}
pre {
	line-height: 1.4;
	overflow-x: auto;
	background: #efefef;
	padding: 0.625rem;
	border-radius: 0.3125rem;
}
a {
	color: #007d9c;
	text-decoration: none;
}
a:hover {
	text-decoration: underline;
}

p,
li {
	max-width: 50rem;
	word-wrap: break-word;
}
li p {
	margin: 2px;
}
p,
pre,
ul,
ol {
	margin: 1.25rem;
}

h1,
h2,
h3,
h4 {
	margin: 1.25rem 0 1.25rem;
	padding: 0;
	color: #007d9c;
	font-weight: bold;
}
h1 {
	font-size: 1.75rem;
	line-height: 1;
}
h1 .text-muted {
	color: #777;
}
h2 {
	clear: right;
	font-size: 1.25rem;
	background: #e0ebf5;
	padding: 0.5rem;
	line-height: 1.25;
	font-weight: normal;
	overflow: auto;
	overflow-wrap: break-word;
}
h2 a {
	font-weight: bold;
}
h3 {
	font-size: 1.25rem;
	line-height: 1.25;
	overflow: auto;
	overflow-wrap: break-word;
}
h3,
h4 {
	margin: 1.25rem 0.3125rem;
}
h4 {
	font-size: 1rem;
}

h2 > span,
h3 > span {
	float: right;
	margin: 0 25px 0 0;
	font-weight: normal;
	color: #5279c7;
}

dl {
	margin: 1.25rem;
}
dd {
	margin: 0 0 0 1.25rem;
}
dl,
dd {
	font-size: 0.875rem;
}

/**
 * Custom classes for pages
 */

.topbar {
	background: #e0ebf5;
	height: 4rem;
	overflow: hidden;
}

.topbar .top-heading,
.topbar .menu {
	padding: 1.313rem 0;
	font-size: 1.25rem;
	font-weight: normal;
}
.topbar .top-heading {
	float: left;
}
.topbar .top-heading a {
	color: #222;
	text-decoration: none;
}

.top-heading .header-logo {
	height: 2rem;
	width: 5.125rem;
}

.topbar .menu {
	float: right;
}
.topbar .menu a {
	margin: 0.625rem 0.125rem;
	padding: 0.625rem;
	color: white;
	background: #007d9c;
	border: 0.0625rem solid #007d9c;
	border-radius: 5px;
}
.topbar .menu form {
	display: inline-block;
}

.page {
	width: 100%;
}

.page > .container,
.topbar > .container,
.footer > .container {
	margin-left: auto;
	margin-right: auto;
	padding: 0 1.25rem;
	max-width: 59.38rem;
}

.page > .container {
	text-align: left;
}

.container .meta {
	font-style: italic;
	margin: 1.25rem;
}

.footer {
	text-align: center;
	color: #666;
	font-size: 0.875rem;
	margin: 2.5rem 0;
}

/** Custom classes */
#toctitle {
	display: none;
}
#toc li {
	list-style: none;
}
#toc ul .sectlevel1 {
	padding: 0px;
	margin: 4px;
}
#toc ul .sectlevel2 {
	margin: 4px;
}

@media screen and (max-width: 992px) {
	#toc {
		all: unset;
	}
}

		</style>
	</head>
	<body>
		<div class="topbar">
			<div class="container">
				<div class="top-heading">
					<a href="/">ciigo</a>
				</div>
				<div class="menu">
					<form class="item" action="/_internal/search">
						<input type="text" name="q" placeholder="Search" />
					</form>
				</div>
			</div>
		</div>

		<div class="page">
			<div class="container">
				
<div id="header">
<h1>CHANGELOG</h1>
<div class="details">
<span id="author" class="author">Shulhan</span><br>
<span id="email" class="email"><a href="mailto:ms@kilabit.info">ms@kilabit.info</a></span><br>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_share_v0_35_0_2022_0x_xx">share v0.35.0 (2022-0x-xx)</a>
<ul class="sectlevel2">
<li><a href="#_new_features">New features</a></li>
<li><a href="#_enhancements">Enhancements</a></li>
</ul>
</li>
<li><a href="#_share_v0_34_0_2022_02_05">share v0.34.0 (2022-02-05)</a>
<ul class="sectlevel2">
<li><a href="#_breaking_changes">Breaking changes</a></li>
<li><a href="#_new_features_1">New features</a></li>
<li><a href="#_enhancements_1">Enhancements</a></li>
<li><a href="#_chores">Chores</a></li>
</ul>
</li>
<li><a href="#_share_v0_33_0_2022_01_09">share v0.33.0 (2022-01-09)</a>
<ul class="sectlevel2">
<li><a href="#_new_features_2">New features</a></li>
<li><a href="#_breaking_changes_1">Breaking changes</a></li>
<li><a href="#_bug_fixes">Bug fixes</a></li>
<li><a href="#_enhancements_2">Enhancements</a></li>
<li><a href="#_chores_1">Chores</a></li>
</ul>
</li>
<li><a href="#_share_v0_32_0_2021_12_03">share v0.32.0 (2021-12-03)</a>
<ul class="sectlevel2">
<li><a href="#_breaking_changes_2">Breaking changes</a></li>
<li><a href="#_new_features_3">New features</a></li>
<li><a href="#_bug_fixes_1">Bug fixes</a></li>
<li><a href="#_enhancements_3">Enhancements</a></li>
</ul>
</li>
<li><a href="#_share_v0_31_0_2021_11_04">share v0.31.0 (2021-11-04)</a>
<ul class="sectlevel2">
<li><a href="#_breaking_changes_3">Breaking changes</a></li>
<li><a href="#_new_features_4">New features</a></li>
<li><a href="#_bug_fixes_2">Bug fixes</a></li>
<li><a href="#_chores_2">Chores</a></li>
</ul>
</li>
<li><a href="#_share_v0_30_0_2021_10_04">share v0.30.0 (2021-10-04)</a>
<ul class="sectlevel2">
<li><a href="#_breaking_changes_4">Breaking changes</a></li>
<li><a href="#_new_features_5">New features</a></li>
<li><a href="#_bug_fixes_3">Bug fixes</a></li>
<li><a href="#_enhancements_4">Enhancements</a></li>
<li><a href="#_chores_3">Chores</a></li>
</ul>
</li>
<li><a href="#_share_v0_29_2_2021_09_06">share v0.29.2 (2021-09-06)</a>
<ul class="sectlevel2">
<li><a href="#_bug_fixes_4">Bug fixes</a></li>
<li><a href="#_enhancements_5">Enhancements</a></li>
<li><a href="#_chores_4">Chores</a></li>
</ul>
</li>
<li><a href="#_share_v0_29_1_2021_08_06">share v0.29.1 (2021-08-06)</a></li>
<li><a href="#_share_v0_29_0_2021_08_06">share v0.29.0 (2021-08-06)</a>
<ul class="sectlevel2">
<li><a href="#_new_feature">New feature</a></li>
<li><a href="#_breaking_changes_5">Breaking changes</a></li>
<li><a href="#_enhancements_6">Enhancements</a></li>
<li><a href="#_bug_fix">Bug fix</a></li>
</ul>
</li>
<li><a href="#_share_v0_28_0_2021_07_06">share v0.28.0 (2021-07-06)</a>
<ul class="sectlevel2">
<li><a href="#_breaking_changes_6">Breaking changes</a></li>
<li><a href="#_enhancements_7">Enhancements</a></li>
</ul>
</li>
<li><a href="#_share_v0_27_0_2021_06_05">share v0.27.0 (2021-06-05)</a>
<ul class="sectlevel2">
<li><a href="#_breaking_changes_7">Breaking changes</a></li>
<li><a href="#_new_features_6">New features</a></li>
<li><a href="#_enhancements_8">Enhancements</a></li>
<li><a href="#_bug_fixes_5">Bug fixes</a></li>
</ul>
</li>
<li><a href="#_share_v0_26_0_2021_05_03">share v0.26.0 (2021-05-03)</a>
<ul class="sectlevel2">
<li><a href="#_new_features_7">New features</a></li>
<li><a href="#_enhancements_9">Enhancements</a></li>
<li><a href="#_chores_5">Chores</a></li>
</ul>
</li>
<li><a href="#_share_v0_25_1_2021_04_06">share v0.25.1 (2021-04-06)</a></li>
<li><a href="#_share_v0_25_0_2021_04_06">share v0.25.0 (2021-04-06)</a>
<ul class="sectlevel2">
<li><a href="#_breaking_changes_8">Breaking changes</a></li>
<li><a href="#_new_features_8">New features</a></li>
<li><a href="#_enhancements_10">Enhancements</a></li>
</ul>
</li>
<li><a href="#_share_v0_24_0_2021_03_06">share v0.24.0 (2021-03-06)</a>
<ul class="sectlevel2">
<li><a href="#_breaking_changes_9">Breaking changes</a></li>
<li><a href="#_new_features_9">New features</a></li>
<li><a href="#_enhancements_11">Enhancements</a></li>
<li><a href="#_bug_fixes_6">Bug fixes</a></li>
</ul>
</li>
<li><a href="#_share_v0_23_0_2021_02_05">share v0.23.0 (2021-02-05)</a>
<ul class="sectlevel2">
<li><a href="#_breaking_changes_10">Breaking changes</a></li>
<li><a href="#_new_features_10">New features</a></li>
<li><a href="#_enhancements_12">Enhancements</a></li>
<li><a href="#_bug_fixes_7">Bug fixes</a></li>
</ul>
</li>
<li><a href="#_share_v0_22_0_2021_01_06">share v0.22.0 (2021-01-06)</a>
<ul class="sectlevel2">
<li><a href="#_breaking_changes_11">Breaking changes</a></li>
<li><a href="#_new_features_11">New features</a></li>
<li><a href="#_enhancements_13">Enhancements</a></li>
</ul>
</li>
<li><a href="#_share_v0_21_0_2020_12_06">share v0.21.0 (2020-12-06)</a>
<ul class="sectlevel2">
<li><a href="#_breaking_changes_12">Breaking changes</a></li>
<li><a href="#_new_features_12">New features</a></li>
<li><a href="#_bug_fixes_8">Bug fixes</a></li>
<li><a href="#_enhancements_14">Enhancements</a></li>
<li><a href="#_chores_6">Chores</a></li>
</ul>
</li>
<li><a href="#_share_v0_20_1_2020_11_08">share v0.20.1 (2020-11-08)</a>
<ul class="sectlevel2">
<li><a href="#_bug_fixes_9">Bug fixes</a></li>
<li><a href="#_enhancements_15">Enhancements</a></li>
<li><a href="#_chores_7">Chores</a></li>
</ul>
</li>
<li><a href="#_share_v0_20_0_2020_10_05">share v0.20.0 (2020-10-05)</a>
<ul class="sectlevel2">
<li><a href="#_new_features_13">New features</a></li>
<li><a href="#_enhancements_16">Enhancements</a></li>
</ul>
</li>
<li><a href="#_share_v0_19_0_2020_09_08">share v0.19.0 (2020-09-08)</a>
<ul class="sectlevel2">
<li><a href="#_breaking_changes_13">Breaking changes</a></li>
<li><a href="#_new_features_14">New features</a></li>
<li><a href="#_bug_fixes_10">Bug fixes</a></li>
</ul>
</li>
<li><a href="#_share_v0_18_0_2020_08_06">share v0.18.0 (2020-08-06)</a>
<ul class="sectlevel2">
<li><a href="#_breaking_changes_14">Breaking changes</a></li>
<li><a href="#_bug_fixes_11">Bug fixes</a></li>
<li><a href="#_enhancements_17">Enhancements</a></li>
</ul>
</li>
<li><a href="#_share_v0_17_0_2020_07_05">share v0.17.0 (2020-07-05)</a>
<ul class="sectlevel2">
<li><a href="#_breaking_changes_15">Breaking changes</a></li>
<li><a href="#_bug_fixes_12">Bug fixes</a></li>
<li><a href="#_enhancements_18">Enhancements</a></li>
</ul>
</li>
<li><a href="#_share_v0_16_0_2020_06_05">share v0.16.0 (2020-06-05)</a>
<ul class="sectlevel2">
<li><a href="#_breaking_changes_16">Breaking changes</a></li>
<li><a href="#_bug_fixes_13">Bug fixes</a></li>
<li><a href="#_new_features_15">New features</a></li>
<li><a href="#_enhancements_19">Enhancements</a></li>
</ul>
</li>
<li><a href="#_share_v0_15_0_2020_05_04">share v0.15.0 (2020-05-04)</a>
<ul class="sectlevel2">
<li><a href="#_breaking_changes_17">Breaking changes</a></li>
<li><a href="#_new_features_16">New features</a></li>
<li><a href="#_enhancements_20">Enhancements</a></li>
<li><a href="#_bug_fixes_14">Bug fixes</a></li>
</ul>
</li>
<li><a href="#_share_v0_14_0_2020_04_03">share v0.14.0 (2020-04-03)</a>
<ul class="sectlevel2">
<li><a href="#_breaking_changes_18">Breaking changes</a></li>
<li><a href="#_new_features_17">New features</a></li>
<li><a href="#_enhancements_21">Enhancements</a></li>
<li><a href="#_bug_fixes_15">Bug fixes</a></li>
</ul>
</li>
<li><a href="#_share_v0_13_0_2020_03_11">share v0.13.0 (2020-03-11)</a>
<ul class="sectlevel2">
<li><a href="#_breaking_changes_19">Breaking changes</a></li>
<li><a href="#_new_features_18">New features</a></li>
<li><a href="#_enhancements_22">Enhancements</a></li>
<li><a href="#_bug_fixes_16">Bug Fixes</a></li>
</ul>
</li>
<li><a href="#_share_v0_12_0_2020_02_13">share v0.12.0 (2020-02-13)</a>
<ul class="sectlevel2">
<li><a href="#_breaking_changes_20">Breaking changes</a></li>
<li><a href="#_new_features_19">New features</a></li>
<li><a href="#_enhancements_23">Enhancements</a></li>
<li><a href="#_bug_fixes_17">Bug fixes</a></li>
</ul>
</li>
<li><a href="#_share_v0_11_0_2019_12_26">share v0.11.0 (2019-12-26)</a>
<ul class="sectlevel2">
<li><a href="#_breaking_changes_21">Breaking changes</a></li>
<li><a href="#_new_features_20">New features</a></li>
<li><a href="#_enhancements_24">Enhancements</a></li>
<li><a href="#_bug_fixes_18">Bug fixes</a></li>
</ul>
</li>
<li><a href="#_share_v0_10_2_2019_12_07">share v0.10.2 (2019-12-07)</a>
<ul class="sectlevel2">
<li><a href="#_bug_fixes_19">Bug Fixes</a></li>
</ul>
</li>
<li><a href="#_share_v0_10_1_2019_12_05">share v0.10.1 (2019-12-05)</a>
<ul class="sectlevel2">
<li><a href="#_bug_fixes_20">Bug Fixes</a></li>
<li><a href="#_enhancements_25">Enhancements</a></li>
</ul>
</li>
<li><a href="#_share_v0_10_0_2019_11_05">share v0.10.0 (2019-11-05)</a>
<ul class="sectlevel2">
<li><a href="#_new_features_21">New Features</a></li>
<li><a href="#_breaking_changes_22">Breaking Changes</a></li>
<li><a href="#_enhancements_26">Enhancements</a></li>
<li><a href="#_bug_fixes_21">Bug Fixes</a></li>
</ul>
</li>
<li><a href="#_share_v0_9_0_2019_10_08">share v0.9.0 (2019-10-08)</a>
<ul class="sectlevel2">
<li><a href="#_new_features_22">New Features</a></li>
<li><a href="#_breaking_changes_23">Breaking Changes</a></li>
<li><a href="#_bug_fixes_22">Bug Fixes</a></li>
<li><a href="#_enhancements_27">Enhancements</a></li>
</ul>
</li>
<li><a href="#_share_v0_8_2_2019_09_05">share v0.8.2 (2019-09-05)</a>
<ul class="sectlevel2">
<li><a href="#_enhancements_28">Enhancements</a></li>
</ul>
</li>
<li><a href="#_share_v0_8_1_2019_08_05">share v0.8.1 (2019-08-05)</a>
<ul class="sectlevel2">
<li><a href="#_enhancements_29">Enhancements</a></li>
</ul>
</li>
<li><a href="#_share_v0_8_0_2019_07_09">share v0.8.0 (2019-07-09)</a>
<ul class="sectlevel2">
<li><a href="#_breaking_changes_24">Breaking changes</a></li>
<li><a href="#_new_features_23">New Features</a></li>
<li><a href="#_enhancements_30">Enhancements</a></li>
</ul>
</li>
<li><a href="#_share_v0_7_0_2019_06_14">share v0.7.0 (2019-06-14)</a>
<ul class="sectlevel2">
<li><a href="#_breaking_changes_25">Breaking Changes</a></li>
<li><a href="#_new_features_24">New Features</a></li>
<li><a href="#_enhancements_31">Enhancements</a></li>
<li><a href="#_bug_fixes_23">Bug Fixes</a></li>
</ul>
</li>
<li><a href="#_share_v0_6_1_2019_05_11">share v0.6.1 (2019-05-11)</a></li>
<li><a href="#_share_v0_6_0_2019_05_07">share v0.6.0 (2019-05-07)</a>
<ul class="sectlevel2">
<li><a href="#_breaking_changes_26">Breaking Changes</a></li>
<li><a href="#_new_features_25">New Features</a></li>
<li><a href="#_bug_fixes_24">Bug Fixes</a></li>
<li><a href="#_documentation">Documentation</a></li>
</ul>
</li>
<li><a href="#_share_v0_5_0_2019_04_02">share v0.5.0 (2019-04-02)</a>
<ul class="sectlevel2">
<li><a href="#_new_features_26">New Features</a></li>
<li><a href="#_enhancements_32">Enhancements</a></li>
</ul>
</li>
<li><a href="#_share_v0_4_0_2019_03_01">share v0.4.0 (2019-03-01)</a>
<ul class="sectlevel2">
<li><a href="#_new_features_27">New Features</a></li>
<li><a href="#_enhancements_33">Enhancements</a></li>
<li><a href="#_fixes">Fixes</a></li>
</ul>
</li>
<li><a href="#_share_v0_3_0_2019_02_01">share v0.3.0 (2019-02-01)</a>
<ul class="sectlevel2">
<li><a href="#_features_changes">Features Changes</a></li>
<li><a href="#_enhancements_34">Enhancements</a></li>
<li><a href="#_fixes_1">Fixes</a></li>
</ul>
</li>
<li><a href="#_share_v0_2_0_2019_01_02">share v0.2.0 (2019-01-02)</a>
<ul class="sectlevel2">
<li><a href="#_new_features_28">New Features</a></li>
<li><a href="#_enhancements_35">Enhancements</a></li>
</ul>
</li>
<li><a href="#_share_v0_1_0_2018_11_29">share v0.1.0 (2018-11-29)</a></li>
</ul>

</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This library is released every month, usually at the first week of month.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_35_0_2022_0x_xx">share v0.35.0 (2022-0x-xx)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_new_features">New features</h3>
<div class="ulist">
<ul>
<li>
<p>cmd/xtrk: command line interface to uncompress and/or unarchive file</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>xtrk accept single file to uncompress and/or archived into a directory
output dir".
If directory output "dir" is not defined, it will be set to current
directoy.</p>
</div>
<div class="paragraph">
<p>The compression and archive format is detected automatically based on the
following file input extension:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>.bz2: decompress using bzip2.</p>
</li>
<li>
<p>.gz: decompress using gzip.</p>
</li>
<li>
<p>.tar: unarchive using tar.</p>
</li>
<li>
<p>.zip: unarchive using zip.</p>
</li>
<li>
<p>.tar.bz2: decompress using bzip2 and unarchive using tar.</p>
</li>
<li>
<p>.tar.gz: decompresss using gzip and unarchive using tar.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The input file will be removed on success.</p>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>lib/ini: make the Marshal on map field sorted by keys</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Given the following struct,</p>
</div>
<div class="listingblock">
<div class="content">
<pre>type ADT struct {
	Amap map[string]string `ini:"section:sub"`
}</pre>
</div>
</div>
<div class="paragraph">
<p>and ini text,</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[test "map"]
c = 3
b = 2
a = 1</pre>
</div>
</div>
<div class="paragraph">
<p>Unmarshal-ing the text into ADT and then Marshal-ing it again will
result in unpredictable keys order.</p>
</div>
<div class="paragraph">
<p>This changes fix this issue by sorting the keys on ADT.Amap on
Marshal-ing, to make the written output predictable.</p>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_34_0_2022_02_05">share v0.34.0 (2022-02-05)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_breaking_changes">Breaking changes</h3>
<div class="ulist">
<ul>
<li>
<p>lib/sql: make the table migration customizable</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>In the method Migrate() we add parameter "tableMigration" which define
the name of table where the state of migration will be saved.</p>
</div>
<div class="paragraph">
<p>If its empty default to "_migration".</p>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_new_features_1">New features</h3>
<div class="ulist">
<ul>
<li>
<p>lib/os: implement function to Extract compressed and/or archived file</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The Extract function uncompress and/or unarchive file from fileInput
into directory defined by dirOutput.
This is the high level API that combine standard archive/zip, archive/tar,
compress/bzip2, and/or compress/gzip.</p>
</div>
<div class="paragraph">
<p>The compression and archive format is detected automatically based on
the following fileInput extension:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>.bz2: decompress using compress/bzip2.</p>
</li>
<li>
<p>.gz: decompress using compress/gzip.</p>
</li>
<li>
<p>.tar: unarchive using archive/tar.</p>
</li>
<li>
<p>.zip: unarchive using archive/zip.</p>
</li>
<li>
<p>.tar.bz2: decompress using compress/bzip2 and unarchive using
archive/tar.</p>
</li>
<li>
<p>.tar.gz: decompress using compress/gzip and unarchive using
archive/tar.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The output directory, dirOutput, where the decompressed and/or unarchived
file stored. will be created if not exist.
If its empty, it will set to current directory.</p>
</div>
<div class="paragraph">
<p>On success, the compressed and/or archived file will be removed from the
file system.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/http: implement method Download() on Client</p>
<div class="paragraph">
<p>The Download method get a resource from remote server and write it into
DownloadRequest.Output (a io.Writer).</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_1">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>lib/websocket: return error if parameter is empty on RegisterTextHandler</p>
<div class="paragraph">
<p>Previously, the RegisterTextHandler method return nil if method, target,
or handler parameter is not set.
This may cause confusion and hard to debug handler when no connection receive
but the RegisterTextHandler does not have any error.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_chores">Chores</h3>
<div class="ulist">
<ul>
<li>
<p>lib/http: change the test port for testing HTTP server</p>
<div class="paragraph">
<p>Previously, the test port for HTTP server is set to 8080 and may conflict
with any service that running on the local (due to common use of 8080).</p>
</div>
<div class="paragraph">
<p>This changes it to 14832 and we make the full server address stored
as global variable so any tests can references it.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_33_0_2022_01_09">share v0.33.0 (2022-01-09)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Happy New Year!</p>
</div>
<div class="paragraph">
<p>Three years has passed since the first release of this multi-libraries (or Go
module), and we have released at least 33 new features with several bugs here
and there.</p>
</div>
<div class="paragraph">
<p>For anyone who use this module, I hope it help you, as the module name
intended "share", and sorry if its too many breaking changes.</p>
</div>
<div class="paragraph">
<p>Live long and prosper!
See you again next year.</p>
</div>
<div class="sect2">
<h3 id="_new_features_2">New features</h3>
<div class="ulist">
<ul>
<li>
<p>cmd/gofilemode: new command to decode the Go file mode</p>
<div class="paragraph">
<p>The Go has their own file mode that works across all operating system.
The file mode is represented by uint64, the command line will convert it
to fs.FileMode and print each possible flag on it including the
permission.</p>
</div>
</li>
<li>
<p>lib/sql: make the TruncateTable run with cascade and restart identity</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>On table that contains foreign key, truncate without cascade may cause
the method fail.</p>
</div>
<div class="paragraph">
<p>Also, since TruncateTable is, and should be only, used on testing, any
identity columns, for example serial, should be reset back to its initial
value. On PostgreSQL this means the truncate table is with
"RESTART IDENTITY".</p>
</div>
</div>
</div>
</li>
<li>
<p>cmd/epoch: command line to print and parse Unix timestamp</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Program epoch print the current time (Unix seconds, milliseconds,
nanoseconds, local time, and UTC time) or the time based on the epoch on
first parameter.
Usage,</p>
</div>
<div class="literalblock">
<div class="content">
<pre>epoch &lt;unix-seconds|unix-milliseconds|unix-nanoseconds&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Without a parameter, it will print the current time.
With single parameter, it will print the time based on that epoch.</p>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_breaking_changes_1">Breaking changes</h3>
<div class="ulist">
<ul>
<li>
<p>lib/http: refactoring NewClient to accept single struct</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously, the NewClient function accept three parameters: serverURL,
http.Header, and insecure.  If we want to add another parameter,
for example timeout it will cause changes on the function signature.</p>
</div>
<div class="paragraph">
<p>To prevent this changes in the future, we change it now. The NewClient
now accept single struct.</p>
</div>
<div class="paragraph">
<p>While at it, we add option to set Timeout.</p>
</div>
<div class="paragraph">
<p>The Timeout affect the http Transport Timeout and TLSHandshakeTimeout.
The field is optional, if not set it will set to 10 seconds.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/http: remove field memfs.Options in ServerOptions</p>
<div class="paragraph">
<p>This options is duplicate with Memfs.Opts.</p>
</div>
</li>
<li>
<p>lib/websocket: add "ok" return value on ClientManager Context</p>
<div class="paragraph">
<p>The ok return value will be true if the context exist or false otherwise.</p>
</div>
</li>
<li>
<p>lib/memfs: remove field ContentEncoding from EmbedOptions and Node</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The original idea for option ContentEncoding in EmbedOptions and Node
is to save spaces, compressing the content on disk on embedding and
doing transport, when the MemFS instance is used to serve the (embedded)
contents of file system.</p>
</div>
<div class="paragraph">
<p>This option turns out break the HTTP content negotiation [1] of
accept-encoding header, if the HTTP server does not handle it properly,
which default Go HTTP server does not.</p>
</div>
<div class="paragraph">
<p>In order to prevent this issue in the future, for anyone who use the
memfs for serving static HTTP contents, we remove the options and store
the embedded content as is and let the HTTP server handle how the
compression by itself.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/email: refacforing ParseMailbox</p>
<div class="paragraph">
<p>This commit changes the signature of ParseMailbox by returning no error.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>[1] <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Content_negotiation" class="bare">https://developer.mozilla.org/en-US/docs/Web/HTTP/Content_negotiation</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes">Bug fixes</h3>
<div class="ulist">
<ul>
<li>
<p>lib/memfs: skip mount if the Root node has been initialized</p>
</li>
<li>
<p>lib/websocket: fix race conditition on handleText</p>
<div class="paragraph">
<p>Instead of accessing the ctx field directly, call the Context() method
to prevent data race.</p>
</div>
</li>
<li>
<p>lib/sql: check for EOF on loadSQL</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>There is probably a regression in Go that cause ioutil.ReadAll return
io.EOF, while it should not, because the documentation said that</p>
</div>
<div class="literalblock">
<div class="content">
<pre>A successful call returns err == nil, not err == EOF.</pre>
</div>
</div>
<div class="paragraph">
<p>But in this, using http.FileSystem, the ioutil.ReadAll now return EOF
and we need to check it to make the migration can run without an error.</p>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_2">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>lib/io: realign all structs</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The struct realign, save the occupied of struct size in the memory,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>DirWatcher: from 184 to 144 bytes (-40 bytes)</p>
</li>
<li>
<p>Reader: from 16 to 8 bytes (-8 bytes)</p>
</li>
<li>
<p>Watcher: from 32 to 24 bytes (-8 bytes)</p>
</li>
</ul>
</div>
</div>
</div>
</li>
<li>
<p>lib/http: realign all structs</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Changes,
* Client: from 56 to 48 bytes (-8 bytes)
* CORSOptions: from 104 to 88 bytes (-16 bytes)
* Endpoint: from 64 to 32 bytes (-32 bytes)
* EndpointRequest: from 72 to 56 bytes (-16 bytes)
* route: from 56 to 32 bytes (-24 bytes)</p>
</div>
<div class="paragraph">
<p>Other changes is struct on unit tests.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/memfs: add method Init</p>
<div class="paragraph">
<p>The Init provided to initialize MemFS instance if its Options is set
directly, not through New() function.</p>
</div>
</li>
<li>
<p>lib/memfs: embed the Embed options and GenFuncName</p>
<div class="paragraph">
<p>This is to make the instance of memfs initialize from init is reusable.</p>
</div>
</li>
<li>
<p>lib/memfs: realign struct Node, Options, PathNode, and on unit tests</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The realign save storage spaces on struct,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Node: from 240 to 224 bytes (-16 bytes)</p>
</li>
<li>
<p>Options: from 112 to 104 bytes (-8 bytes)</p>
</li>
<li>
<p>PathNode: from 16 to 8 bytes (-8 bytes)</p>
</li>
</ul>
</div>
</div>
</div>
</li>
<li>
<p>lib/email: realign the struct Mailbox</p>
<div class="paragraph">
<p>This changes the storage size from 80 to 72 bytes (-8 bytes).</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_chores_1">Chores</h3>
<div class="ulist">
<ul>
<li>
<p>github/workflows: remove step to get dependencies</p>
<div class="paragraph">
<p>The Go module should handle the dependencies automatically.</p>
</div>
</li>
<li>
<p>github/workflows: set go version to 1.17.6</p>
</li>
<li>
<p>lib/email: convert the unit test for ParseMailbox to examples</p>
<div class="paragraph">
<p>Since the ParseMailbox is public we can provide an examples and test
at the same times.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_32_0_2021_12_03">share v0.32.0 (2021-12-03)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This release bring major changes and enhancements to package dns and math/big.</p>
</div>
<div class="sect2">
<h3 id="_breaking_changes_2">Breaking changes</h3>
<div class="ulist">
<ul>
<li>
<p>math/big: refactoring AddFloat to accept variadic interface{}</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously, the AddFloat function only accept two interface parameters.</p>
</div>
<div class="paragraph">
<p>This changes make the AddFloat to accept many interface parameters.</p>
</div>
</div>
</div>
</li>
<li>
<p>math/big: refactor NewFloat to accept interface{} instead of float64 only</p>
<div class="paragraph">
<p>The following types is added and can be initialized to Float: []byte,
uint, uint16, uint32, uint64, big.Int, *big.Int, big.Rat, and *big.Rat.</p>
</div>
</li>
<li>
<p>math/big: refactoring the Rat</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The promise of this package is to provide the Rat type with RoundToZero
and without panic.</p>
</div>
<div class="paragraph">
<p>In order to do that we remove the MustRat() function and check for nil
on pointer receiver before doing operation, and check for zero value
when doing quotation.</p>
</div>
<div class="paragraph">
<p>Another breaking changes are,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Humanize() with nil pointer receiver will return string "0"</p>
</li>
<li>
<p>Any IsXxx() methods with nil pointer receiver will return false</p>
</li>
<li>
<p>MarshalJSON() will nil pointer receiver will return "null" instead of
"0" now</p>
</li>
</ul>
</div>
</div>
</div>
</li>
<li>
<p>lib/dns: refactoring, change signature of client Lookup</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously, Lookup() method on Client pass the question name, type, and
class as parameters.</p>
</div>
<div class="paragraph">
<p>This changes make those parameters into MessageQuestion.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/dns: refactoring ZoneFile into Zone</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Reason: A Zone is not always represented by file, it just that in this
package, it is.</p>
</div>
<div class="paragraph">
<p>This changes rename the type ZoneFile into Zone.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/dns: refactoring message question</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously the type for message question section SectionQuestion.</p>
</div>
<div class="paragraph">
<p>This changes, rename the type to MessageQuestion.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/dns: refactoring the section header</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>This changes rename the SectionHeader into MessageHeader.</p>
</div>
<div class="paragraph">
<p>The pack() method is optimized with the following results,</p>
</div>
<div class="paragraph">
<p>benchmark                         old ns/op     new ns/op     delta
BenchmarkMessageHeader_pack-8     66.2          21.7          -67.31%</p>
</div>
<div class="paragraph">
<p>benchmark                         old allocs     new allocs     delta
BenchmarkMessageHeader_pack-8     3              1              -66.67%</p>
</div>
<div class="paragraph">
<p>benchmark                         old bytes     new bytes     delta
BenchmarkMessageHeader_pack-8     32            16            -50.00%</p>
</div>
<div class="paragraph">
<p>The unpack() method is simplified by minimizing the if-condition.</p>
</div>
<div class="paragraph">
<p>This changes also fix the pack and unpack OpCode for value other then 0,
due to wrong shift value, 2 instead of 3.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/dns: refactoring, introduce new type RecordClass</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously, the record class is represented by uint16 using prefix
QueryClassXxx.</p>
</div>
<div class="paragraph">
<p>This changes make the record class to be an independent type, to make
code more strict (prevent passing invalid value), and readable.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/dns: refactoring, create type RecordType to represent type of RR</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously, we use uint16 to represent type for ResourceRecord Type or
Question type.</p>
</div>
<div class="paragraph">
<p>To make the code more strict, where parameter or return value, must be
expected as record type, we add new type to represent the RR type:
RecordType.</p>
</div>
<div class="paragraph">
<p>This changes also rename any variable name of QType or qtype to RType
or rtype because QType is misleading. The type defined the
ResourceRecord to be queried not only question.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/dns: remove the fallback name servers (NS) from server options</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The original idea of fallback NS is to send the query to the one define
to original resolv.conf, instead of using the one defined by user in
ServerOptions NameServers, when an error occured.</p>
</div>
<div class="paragraph">
<p>But, most of error usually caused by network (disconnected, time out),
so re-sending query to fallback NS does not have any effect if the network
it self is not working.</p>
</div>
<div class="paragraph">
<p>This changes remove the unnecessary and complex fallback NS from
server.</p>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_new_features_3">New features</h3>
<div class="ulist">
<ul>
<li>
<p>lib/dns: add support to save and load caches to/from storage</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The CachesSave method write the non-local answers into an io.Writer,
encoded with gob.</p>
</div>
<div class="paragraph">
<p>The CachesLoad method load the gob encoded answers from an io.Reader.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/ssh: use agent defined by config or from environment variable</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously, we only check the environment variable SSH_AUTH_SOCK
to decide whether the client identity will fetched from agent or
from private key file.</p>
</div>
<div class="paragraph">
<p>This changes use the GetIdentityAgent from config Section to derive the
path to unix socket.  It will return an empty string if the IdentityAgent
is set to "none" in the Section or when SSH_AUTH_SOCK is not exist or
empty.</p>
</div>
</div>
</div>
</li>
<li>
<p>ssh/config: add support for section variable IdentityAgent</p>
<div class="paragraph">
<p>There are four possible value for IdentityAgent: SSH_AUTH_SOCK,
&lt;$STRING&gt;, &lt;PATH&gt;, or "none".
If SSH_AUTH_SOCK, the socket path is read from the environment variable
SSH_AUTH_SOCK.
If value start with "$", then the socket path is set based on value of
that environment variable.
Other string beside "none" will be considered as path to socket.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_1">Bug fixes</h3>
<div class="ulist">
<ul>
<li>
<p>math/big: return nil on Quo and QuoRat instead of panic</p>
<div class="paragraph">
<p>Previously, if the first parameter of Quo or the second/next parameters
of QuoRat is not convertable to Rat or zero, the method/function will
panic.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>This changes make it less intrusive, instead of panic we check for
zero value and return nil immediately.
&#8212;</p>
</div>
<div class="ulist">
<ul>
<li>
<p>lib/dns: do not cache truncated answer</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously only answer with non-zero response code is ignored.</p>
</div>
<div class="paragraph">
<p>This changes ignore also answer where response header is truncated.</p>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_3">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>lib/dns: realign all struct fields</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Turns out the struct that we frequently used, answer and resource_record,
is not optimized.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>answer.go:15:13: struct with 56 pointer bytes could be 24 = 32 bytes
...
resource_record.go:24:21: struct with 56 pointer bytes could be 40 = 16</pre>
</div>
</div>
<div class="paragraph">
<p>This changes reorder all structs field to save space in memory.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/dns: make the TCP forwarders as complementary of UDP</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The TCP forwarders only active when client send the DNS request as TCP.
When the server receive that request it should also forward the request
as TCP not as UDP to prevent the truncated response.</p>
</div>
<div class="paragraph">
<p>Another use case for TCP is when the response is truncated, the client
will send the query back through TCP connection.  The server should
forward this request using TCP instead of UDP.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/dns: use different packet between UDP and TCP messages</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously, all packet size for reading and sending the message is
fixed to 4096, even on UDP.</p>
</div>
<div class="paragraph">
<p>This changes set the UDP packet size maximum to 512 bytes and others to
4096 bytes.</p>
</div>
<div class="paragraph">
<p>While at it, minimize copying packet if its not reusable inside a method.</p>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_31_0_2021_11_04">share v0.31.0 (2021-11-04)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_breaking_changes_3">Breaking changes</h3>
<div class="ulist">
<ul>
<li>
<p>lib/memfs: move the embedded parameter to Options</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Since the GoEmbed can be called only when MemFS instance is initiated,
it would be better if parameters for GoEmbed also initialized in the
struct Options.
In this way any additional parameters needed to add to GoEmbed does not
changes the method signature in the future.</p>
</div>
<div class="paragraph">
<p>This commit add new type EmbedOptions that contains the parameters
for GoEmbed.</p>
</div>
<div class="paragraph">
<p>In this new type, we add new field EmbedWithoutModTime.
if its true, the modification time for all files and directories are not
stored inside generated code, instead all files will use the current
time when the program is running.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/totp: make the New to accept only hash with SHA1, SHA256, or SHA512</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously, the first parameter to New is a function that return
hash.Hash.  This signature can be misleading, because md5.New also
can return hash.Hash but not usable in TOTP.</p>
</div>
<div class="paragraph">
<p>This changes update the New function signature to accept defined
type that can be set to SHA1, SHA256, or SHA512.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/bytes: refactoring and cleaning up the bytes package</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The bytes package, and many other packages in this module, is written
when I still learning and using the Go language for master thesis.
Some of the code, like function signature, does not follow the
Go idiom, at least not how the Go source code looks like.</p>
</div>
<div class="paragraph">
<p>A breaking changes,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>WriteUint16 and WriteUint32 accept slice only without pointer.
There is no need to pass slice as pointer to function if we want
to modify the content, as long as the backing storage is not
changed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Bug fixes,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>PrintHex: fix print layout on the last line</p>
</li>
<li>
<p>ReadHexByte: fix possible index out of range</p>
</li>
<li>
<p>SkipAfterToken return -1 and false if no token found, as promised
in the comment, instead of the length of text.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We move all unit test to example so we have test and example in the
documentation at the same time.</p>
</div>
<div class="paragraph">
<p>This changes make all test coverage 100%.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/bytes: refactoring AppendXxx functions</p>
<div class="paragraph">
<p>Previously, we pass pointer to slice on AppendInt16, AppendInt32,
AppendUint16, and AppendUint32 functions.  This model of function
signature is not a Go idiom.  It is written when I am still new to
Go.</p>
</div>
</li>
<li>
<p>lib/ascii: change signature of ToLower and ToUpper</p>
<div class="paragraph">
<p>Using pointer to slice on method or function is not a Go idiom.
It is created when I still new to Go.</p>
</div>
</li>
<li>
<p>lib/memfs: refactoring Node field V into Content</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The reason why the field named V is because it&#8217;s short.  It&#8217;s come
from my C/C++ experience that got carried away when writing this
package.</p>
</div>
<div class="paragraph">
<p>Now, after having more time writing Go, I prefer clarity over
cleverity(?).</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/memfs: set the node modification time in embedded file</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>This changes set all node modification time in embedded files to
the node modTime using Unix() and Nanosecond() values.</p>
</div>
<div class="paragraph">
<p>Since the time will always changes we need to remove the test to
generate file gen_test.go to prevent the file being modified and
re-adding the same file every time we run local tests.</p>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_new_features_4">New features</h3>
<div class="ulist">
<ul>
<li>
<p>lib/ini: add function IsValidVarName</p>
<div class="paragraph">
<p>The IsValidVarName check if "v" is valid variable name, where the
first character must be a letter and the rest should contains only
letter, digit, period, hyphen, or underscore.
If "v" is valid it will return true.</p>
</div>
</li>
<li>
<p>lib/memfs: set the node modification time in embedded file</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>This changes set all node modification time in embedded files to
the node modTime using Unix() and Nanosecond() values.</p>
</div>
<div class="paragraph">
<p>Since the time will always changes we need to remove the test to
generate file gen_test.go to prevent the file being modified and
re-adding the same file every time we run local tests.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/io: add method String to FileState type</p>
<div class="paragraph">
<p>The String method return the string representation of FileState.
Usually used only for debugging.</p>
</div>
</li>
<li>
<p>lib/smtp: implement method Noop on Client</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Noop send the NOOP command to server with optional message.</p>
</div>
<div class="paragraph">
<p>On success, it will return response with Code 250, StatusOK.</p>
</div>
<div class="paragraph">
<p>While at it fix double call to recv on Reset() method.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/smtp: implement method Reset on Client</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The Reset() method send the STMP RSET command to the server.</p>
</div>
<div class="paragraph">
<p>This command clear the current buffer on MAIL, RCPT, and DATA, but not the
EHLO/HELO buffer.</p>
</div>
<div class="paragraph">
<p>On success, it will return response with Code 250, StatusOK.</p>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_2">Bug fixes</h3>
<div class="ulist">
<ul>
<li>
<p>lib/ascii: fix IsHex return false on 0</p>
</li>
<li>
<p>lib/memfs: fix parent empty directory not removed</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Use case:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>x
x/y</pre>
</div>
</div>
<div class="paragraph">
<p>If x/y is empty, and x processed first, the x will
not be removed.</p>
</div>
<div class="paragraph">
<p>This commit fix this, by sorting the paths in descending order first
to make empty parent removed clearly.  In above case the order
or check become,</p>
</div>
<div class="literalblock">
<div class="content">
<pre>x/y
x</pre>
</div>
</div>
<div class="paragraph">
<p>While at it, update an example of New to give preview of input and
what the expected output for certain operations.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/xmlrpc: rewrite the Client connection using lib/http</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Using socket connection require reading the HTTP response header before
we can process the response body.</p>
</div>
<div class="paragraph">
<p>Instead of rewrite the parser, use the lib/http to send and receive
the request/response.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/io: do not use absolute path on dummy Watcher parent SysPath</p>
<div class="paragraph">
<p>Converting that parameter path to absolute path may cause unpredictable
result on module that use it.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_chores_2">Chores</h3>
<div class="ulist">
<ul>
<li>
<p>lib/ini: add example of marshal/unmarshaling of section with sub</p>
<div class="paragraph">
<p>This changes also fix the example of field tag on marshaling the
map.</p>
</div>
</li>
<li>
<p>lib/io: add method String to FileState type</p>
<div class="paragraph">
<p>The String method return the string representation of FileState.
Usually used only for debugging.</p>
</div>
</li>
<li>
<p>lib/memfs: remove unnecessary initialization on NewNode</p>
<div class="paragraph">
<p>The zero value for V ([]byte) is already nil and Node.Childs
([]*Node) does not need to be initialized with make if size is 0.</p>
</div>
</li>
<li>
<p>lib/io: use t.Cleanup instead of defer on test</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_30_0_2021_10_04">share v0.30.0 (2021-10-04)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_breaking_changes_4">Breaking changes</h3>
<div class="ulist">
<ul>
<li>
<p>lib/io: separate FileState for updated mode and content</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously, when content of file being watched is modified, it will
trigger the callback with State set to FileStateModified.  When the
mode of file is modified, it will also trigger the callback with
the same state.</p>
</div>
<div class="paragraph">
<p>This changes separated those state into two kind: FileStateUpdateMode
for update on file mode, and FileStateUpdateContent for update on
file content.</p>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_new_features_5">New features</h3>
<div class="ulist">
<ul>
<li>
<p>lib/memfs: export the Node Update method</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The Update method update the node metadata or content based on new
file information.
It accept two parameters: the new file information, newInfo, and
maximum file size, maxFileSize.</p>
</div>
<div class="paragraph">
<p>The newInfo parameter is optional, if its nil, it will read the file
information based on node&#8217;s SysPath.</p>
</div>
<div class="paragraph">
<p>The maxFileSize parameter is also optional.
If its negative, the node content will not be updated.
If its zero, it will default to 5 MB.</p>
</div>
<div class="paragraph">
<p>There are two possible changes that will happen: its either change on
mode or change on content (size and modtime).
Change on mode will not affect the content of node.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/strings: add function Alnum</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The Alnum remove non alpha-numeric character from text and return it.
Its accept the string to be cleanup and boolean parameter withSpace.
If withSpace is true then white space is allowed, otherwise it would
also be removed from text.</p>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_3">Bug fixes</h3>
<div class="ulist">
<ul>
<li>
<p>lib/memfs: fix symlink to directory not included on mount</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>During mounting and scanning a directory, if the node is symlink to a
directory, the isIncluded will return false because the node is not
a file nor directory.</p>
</div>
<div class="paragraph">
<p>The fix is to check if node mode is symlink first and then get the
the real stat.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/io: fix NewWatcher when called DirWatcher</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>When NewWatcher called from DirWatcher&#8217;s Start(), it will called NewNode
with nil parent parameter.  If the parent parameter is nil on NewNode
the SysPath of new node will be set to the FileInfo.Name() instead of
full or relative path based on current working directory.</p>
</div>
<div class="paragraph">
<p>Any operation using new node SysPath will failed because the path
does not exist or reachable from current directory.</p>
</div>
<div class="paragraph">
<p>For example, let say we have the following directory tree,</p>
</div>
<div class="literalblock">
<div class="content">
<pre>testdata
|
+--- A
|
+--- B</pre>
</div>
</div>
<div class="paragraph">
<p>We then set DirWatcher Root to "testdata" from current directory.
The DirWatcher Start then iterate over all child of "testdata" directory,
and call NewWatcher("testdata/A", &#8230;&#8203;). On the NewWatcher, it will
call NewNode(nil, FileInfo, -1).  Now since the parent is nil,
the Node.SysPath will be set to FileInfo.Name() or base name of the file,
which is "A".</p>
</div>
<div class="paragraph">
<p>Later, when node content need to be read, ioutil.ReadFile("A") will
fail because the path to "A" does not exist on current directory.</p>
</div>
<div class="paragraph">
<p>This fix require to force the parameter "parent" on NewNode to be
required.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/memfs: fix possible data race on PathNode</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>During Memfs Get(), if the node returned by PathNodes.Get() is null,
the memfs instance will try to refresh the directory tree. In case
the requested path exist, the memfs will write to PathNodes through
AddChild()</p>
</div>
<div class="paragraph">
<p>At the same time, there maybe a request to access another path, which
cause both read and write occured.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/memfs: fix NewNode if node is symlink to directory</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously, if a symlink point to directory the memfs NewNode function
will return an error,</p>
</div>
<div class="literalblock">
<div class="content">
<pre>AddChild wui: NewNode: read x/y: is a directory</pre>
</div>
</div>
<div class="paragraph">
<p>which cause the files inside y cannot be scanned (404).</p>
</div>
<div class="paragraph">
<p>This commit fix this issue by checking if the original node mode is a
directory and return immediately.</p>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_4">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>lib/memfs: check error on File Close on GoGenerate</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously, we ignore the error for call to Close when there is an
error in previous operation.</p>
</div>
<div class="paragraph">
<p>This changes check the error returned from Close and add it to the
returned error message.</p>
</div>
<div class="paragraph">
<p>While at it, use consisten prefix for all returned error:
"MemFS.GoGenerate".</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/http: support server caching file system using ETag</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the Server handle file system using MemFS, server will set the
ETag [1] header using the file epoch as value.</p>
</div>
<div class="paragraph">
<p>On the next request, server will compare the request header
If-None-Match with the requested file epoch. If its equal server will
return the response as 304 StatusNotModified.</p>
</div>
<div class="paragraph">
<p>[1] <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/ETag" class="bare">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/ETag</a></p>
</div>
</div>
</div>
</li>
<li>
<p>lib/xmlrpc: convert the value using Sprintf on GetFieldAsString</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously, the GetFieldAsString will return empty string if the
Value type is not string.</p>
</div>
<div class="paragraph">
<p>In this commit, we force the value to be string by converted it using
fmt.Sprintf.</p>
</div>
</div>
</div>
</li>
<li>
<p>math/big: add some examples of Rat.Int64() and RoundToNearestAway</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_chores_3">Chores</h3>
<div class="ulist">
<ul>
<li>
<p>github: update the Go version to v1.17.1</p>
</li>
<li>
<p>lib/strings: update comment and example of TrimAlnum</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_29_2_2021_09_06">share v0.29.2 (2021-09-06)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_bug_fixes_4">Bug fixes</h3>
<div class="ulist">
<ul>
<li>
<p>os/exec: fix escaped quote inside the same quote</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Shell quote is a hell of complex.  For example, one can write
shell that execute command that contains quote of quote,</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sh -c "psql -c 'CREATE ... IDENTIFIED BY PASSWORD '\''pass'\'''"</pre>
</div>
</div>
<div class="paragraph">
<p>or to simplify,</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sh -c "psql -c \"CREATE ... IDENTIFIED BY PASSWORD 'pass'\""</pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>lib/memfs: fix empty ContentType if MaxFileSize is negative</p>
<div class="paragraph">
<p>A negative MaxFileSize means the content of file will not be mapped to
memory, but the content type should be detected for other operation.</p>
</div>
</li>
<li>
<p>lib/memfs: fix empty file not being added to tree</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously, we did not check if the file size is 0 before reading the
content or updating the content type, which cause the read on file
return io.EOF and the file not added to caches.</p>
</div>
<div class="paragraph">
<p>This commit fix this issue by checking for zero file size and for
io.EOF when reading the file content.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/memfs: fix symbolic link with different name</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously, if file is symbolic link and has different name with their
original file, it will return an error when we tried to open the file</p>
</div>
<div class="literalblock">
<div class="content">
<pre>parentpath/filename: no such file or directory</pre>
</div>
</div>
<div class="paragraph">
<p>because we use the original file name, not the symlinked file name.</p>
</div>
<div class="paragraph">
<p>This commit fix this issue by not replacing the original FileInfo for
symlink but by setting only the size and mode.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/sql: do not run migration if the last file not exist on the list</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously, if the last migrated file name not found on the migration
directory, we start executing migration start from the first file.</p>
</div>
<div class="paragraph">
<p>This changes the behaviour to not run any migration at all.
Since we cannot return it as an error, we only log it.  In the future
we may return it.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/http: fix missing content type for XML Header</p>
<div class="paragraph">
<p>If the Endpoint set the RequestType to RequestTypeXML, the response
header should be set to ContentTypeXML.</p>
</div>
</li>
<li>
<p>lib/xmlrpc: fix missing port on NewClient</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Calling net.Dial or tls.Dial on host without port will cause the
following error,</p>
</div>
<div class="literalblock">
<div class="content">
<pre>NewClient: Dial: dial tcp: address 10.148.0.164: missing port in address</pre>
</div>
</div>
<div class="paragraph">
<p>This changes fix this by always generate new host value using previous
host and port values.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/smtp: return io.EOF if no data received from server</p>
<div class="paragraph">
<p>This is to prevent the recv return nil on *Response without an error,
which may cause panic on caller side.</p>
</div>
</li>
<li>
<p>os/exec: check for escaped backslash when ParseCommandArgs</p>
<div class="paragraph">
<p>Given the following string "cmd /a b" to ParseCommandArgs now
return "cmd" and ["/a b"] not ["/a", "b"], because the space after a
is escaped using backslash.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_5">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>lib/memfs: set default content type for empty file to "text/plain"</p>
<div class="paragraph">
<p>An empty file should be able to be displayed as text file instead of
downloaded as binary.</p>
</div>
</li>
<li>
<p>lib/memfs: change the MarshalJSON to always return an object</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously, MarshalJSON on memfs will return an object of map
of all PathNodes and on Node it will return an object.</p>
</div>
<div class="paragraph">
<p>This changes make it the JSON response consistent. If its directory
it will return the node object with its childs, without "content".
If its file, it will return the node object with content.</p>
</div>
<div class="paragraph">
<p>While at it, use single "mod_time" with value is epoch and return
the node ContentType as "content_type".</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/mlog: implement io.Writer and add function ErrorWriter</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The ErrorWriter will return the internal default MultiLogger.
A call to Write() on returned io.Writer will forward it to all registered
error writers.</p>
</div>
<div class="paragraph">
<p>A Write method on MultiLogger write the b to all error writers.
It will always return the length of b without an error.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/memfs: add method Save and Encode</p>
<div class="paragraph">
<p>The Save method will write the new content to file system and update
the content of Node using Encode().</p>
</div>
</li>
<li>
<p>lib/ssh: add method to set session output and error</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously, all of the SSH output and error goes to os.Stdout and
os.Stderr.</p>
</div>
<div class="paragraph">
<p>This changes add method SetSessionOutputError to change the output and
error for future remote execution.</p>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_chores_4">Chores</h3>
<div class="ulist">
<ul>
<li>
<p>lib/reflect: make the IsNil tests to become an example</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>In this way we do test and provide an example at the same time.</p>
</div>
<div class="paragraph">
<p>While at it, add another test cases for boolean, initialized slice, map,
and errors.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/websocket: try to fix flaky test on client</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The following error thrown when running on Github Action using
Ubuntu-latest and Go 1.16.3,</p>
</div>
<div class="literalblock">
<div class="content">
<pre>client_test.go:472: write tcp 127.0.0.1:34460-&gt;127.0.0.1:9001:
write: connection reset by peer</pre>
</div>
</div>
<div class="paragraph">
<p>This may be caused by using the same client connection on all test
cases.</p>
</div>
<div class="paragraph">
<p>We try to fix this by creating new client on each test cases.</p>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_29_1_2021_08_06">share v0.29.1 (2021-08-06)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Revert the "lib/errors: return the internal error only if its not nil on
Unwrap".</p>
</div>
<div class="paragraph">
<p>Returning instance of e on Unwrap will cause recursive call.</p>
</div>
<div class="paragraph">
<p>The correct solution to convert an error to errors.E is by implementing the As
method.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_29_0_2021_08_06">share v0.29.0 (2021-08-06)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_new_feature">New feature</h3>
<div class="paragraph">
<p>ssh/sftp: new package that implement SSH File Transport Protocol v3</p>
</div>
<div class="paragraph">
<p>The sftp package extend the golang.org/x/crypto/ssh package by
implementing "sftp" subsystem using the ssh.Client connection.</p>
</div>
</div>
<div class="sect2">
<h3 id="_breaking_changes_5">Breaking changes</h3>
<div class="ulist">
<ul>
<li>
<p>text/diff: add functions to compare raw bytes as text and text.Lines</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>This changes refactoring some functions, notably,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Rename Bytes function to IsEqual</p>
</li>
<li>
<p>Rename Lines function to Bytes</p>
</li>
<li>
<p>Add function Text that compare two text (raw bytes)</p>
</li>
<li>
<p>Add function Lines that compare two instances of text.Lines</p>
</li>
</ul>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_6">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>lib/mlog: add function and method Panicf</p>
<div class="paragraph">
<p>The Panicf method is equal to Errf followed by panic.  This signature
follow the log.Panicf convention.</p>
</div>
</li>
<li>
<p>lib/text: implement function to parse raw bytes into Lines</p>
</li>
<li>
<p>lib/text: implement Stringer on Chunk and Line types</p>
</li>
<li>
<p>lib/memfs: implement json.Marshaler on MemFS and Node</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously, without MarshalJSON, encoding the MemFS or Node object will
result in incomplete information, for example, missing name, modification
time, and size.</p>
</div>
<div class="paragraph">
<p>This commit implement the json.Marshaler in MemFS which encode the
PathNode sorted by keys in ascending order.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/bytes: print the ASCII character on the right side on PrintHex</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously, PrintHex only print the hex value of all bytes with
specified length.</p>
</div>
<div class="paragraph">
<p>This changes also print any printables ASCII characters (char 33 through
126) in the right side column to view readable contents.</p>
</div>
</div>
</div>
</li>
<li>
<p>lib/totp: lib/totp: increase the maximum steps back on Verify from 2 to 20</p>
<div class="paragraph">
<p>The value 20 means the Verify will check maximum 20 TOTP tokens or 10
minutes to the past.</p>
</div>
</li>
<li>
<p>lib/http: check request path as HTML file on getFSNode</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously, if the request path is not exist we check if request
contains index.html and if still not exist we return nil.</p>
</div>
<div class="paragraph">
<p>This commit add another check by appending ".html" to the request path.</p>
</div>
<div class="paragraph">
<p>So, for example, if path "/x" not exist in memfs, we check if
"/x/index.html". If its still not exist, we check "/x.html".</p>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fix">Bug fix</h3>
<div class="ulist">
<ul>
<li>
<p>lib/errors: return the internal error only if its not nil on Unwrap</p>
<div class="paragraph">
<p>If the internal error is nil, the Unwrap method will return the instance
of e itself.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_28_0_2021_07_06">share v0.28.0 (2021-07-06)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_breaking_changes_6">Breaking changes</h3>
<div class="ulist">
<ul>
<li>
<p>lib/ssh: rename method Get to ScpGet and Put to ScpPut</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>This changes is to make clear that the methods to copy the files, either
from local or from remote, is using the "scp" through exec package,
not using the native SSH file transfer protocol.</p>
</div>
<div class="paragraph">
<p>While at it, use consistent log prefix for error message.</p>
</div>
</div>
</div>
</li>
<li>
<p>ssh: rename the NewClient function to NewClientFromConfig</p>
<div class="paragraph">
<p>This is to differentiate it with x/crypto ssh package that have the same
function name.</p>
</div>
</li>
<li>
<p>ssh: move the config parser to subpackage "config"</p>
<div class="paragraph">
<p>There are two reasons for moving to sub-package.  First, the code for
parsing the ssh_config(5) take almost 99% of the lines in the ssh package.
Second, in case we want to submit the code to upstream,
golang.org/x/crypto, we need the package to be independent, less external
dependencies as possible.</p>
</div>
</li>
<li>
<p>http: remove the Memfs field from Server</p>
<div class="paragraph">
<p>Now that Options field has been exported, we did not need to have
duplicate Memfs, so this field is removed in favor of Options.Memfs.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_7">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>websocket: export the Options field on the Server</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously, the Options field is not exported to prevent user from
changing it once it set through NewServer() function.</p>
</div>
<div class="paragraph">
<p>This changes export the Options field to allow user of Server access its
values.  We can create a method on server to return read-only options,
but that will over complicated the Server API.</p>
</div>
</div>
</div>
</li>
<li>
<p>http: export the Options field on the Server</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously, the Options field is not exported to prevent user from
changing it once it set through NewServer() function.</p>
</div>
<div class="paragraph">
<p>This changes export the Options field to allow user of Server access its
values.  We can create a method on server to return read-only options,
but that will over complicated the Server API.</p>
</div>
</div>
</div>
</li>
<li>
<p>websocket: store all the handshake headers to Handshake.Header</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously only non-required headers are stored in the Handshake Header
field, while the required header value stored on their respective fields.</p>
</div>
<div class="paragraph">
<p>This commit store all request header key and values into the Header field.</p>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_27_0_2021_06_05">share v0.27.0 (2021-06-05)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This release bring better functionalities, usability, and fixes for <code>xmlrpc</code>
package.</p>
</div>
<div class="sect2">
<h3 id="_breaking_changes_7">Breaking changes</h3>
<div class="ulist">
<ul>
<li>
<p>xmlrpc: change the Response to embed the errors.E</p>
<div class="paragraph">
<p>The errors.E contains code and message that also implement wrapping and
unwrapping error, so we can use the Response as error just like in
http.EndpointResponse.</p>
</div>
</li>
<li>
<p>xmlrpc: write the XML header when marshaling request not on client</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously, the XML header is added when sending the request using
client.</p>
</div>
<div class="paragraph">
<p>This commit changes it to write the header when marshaling the Request
instance.</p>
</div>
</div>
</div>
</li>
<li>
<p>xmlrpc: replace Value field for struct with map of string and value</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously, for param with type "struct" is represented by slice of
Member{Name,Value}.</p>
</div>
<div class="paragraph">
<p>This commit changes the Value field for "struct" to a map of string and
value for easily access the struct&#8217;s member, without looping.</p>
</div>
</div>
</div>
</li>
<li>
<p>xmlrpc: refactoring the parser for decoding XML-RPC request</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>This changes,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>method to parse XML-RPC request,</p>
</li>
<li>
<p>change the Member field Value type to pointer to Value,</p>
</li>
<li>
<p>change the Request field Params type to slice of pointer of Value,</p>
</li>
<li>
<p>change the Response field Param type to pointer to Value,</p>
</li>
<li>
<p>rename the Value fields from Members to StructMembers and Values to
ArrayValues</p>
</li>
</ul>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_new_features_6">New features</h3>
<div class="ulist">
<ul>
<li>
<p>memfs: add function to Merge one or more instance of MemFS</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The Merge function merge one or more instance of MemFS into single MemFS
instance.</p>
</div>
<div class="paragraph">
<p>If there are two instance of Node that have the same path, the last
instance will be ignored.</p>
</div>
</div>
</div>
</li>
<li>
<p>xmlrpc: add method to marshal Response</p>
</li>
<li>
<p>mlog: add function and method PrintStack</p>
<div class="paragraph">
<p>The PrintStack function or method will writes to error writers the stack
trace returned by debug.Stack.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_8">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>http: add request type for XML</p>
<div class="paragraph">
<p>Setting Endpoint&#8217;s RequestType to RequestTypeXML will check the content
type of HTTP request to match with "text/xml".</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_5">Bug fixes</h3>
<div class="ulist">
<ul>
<li>
<p>memfs: set the field Parent on Node AddChild</p>
</li>
<li>
<p>xmlrpc: convert the uint8 and uint16 as type Integer, and Uint as Double</p>
<div class="paragraph">
<p>Previously, uint8 and uint16 will be converted as Double, but those
types are in range of four bytes so it can still be handled by int32.</p>
</div>
</li>
<li>
<p>xmlrpc: set client response IsFault when StatusCode &gt;= 400</p>
<div class="paragraph">
<p>Previously, we set IsFault to true if the HTTP response code not equal to
200 only, which is not always correct.</p>
</div>
<div class="paragraph">
<p>This commit changes it to check any status code that is greater or equal
to 400.</p>
</div>
</li>
<li>
<p>memfs: fix test by checking multiple content-types</p>
<div class="paragraph">
<p>On Arch Linux with Go tip, the content-type for JavaScript file is
"text/javascript".  While on Ubuntu with Go 1.16 the content-type for
JavaScript file is "application/javascript".</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_26_0_2021_05_03">share v0.26.0 (2021-05-03)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_new_features_7">New features</h3>
<div class="ulist">
<ul>
<li>
<p>math/big: add method Add, IsLess, IsGreater, and Scan on Int</p>
<div class="paragraph">
<p>The Add method simplify addition of one value to current Int.</p>
</div>
<div class="paragraph">
<p>The IsLess and IsGreater method simplify comparing Int with any value.</p>
</div>
<div class="paragraph">
<p>The Scan method allow the Int to be used on sql Scan().</p>
</div>
</li>
<li>
<p>math/big: add method IsZero on Int</p>
<div class="paragraph">
<p>The IsZero method will return true if the current i value is zero.</p>
</div>
</li>
<li>
<p>big: extends the standard big.Int</p>
<div class="paragraph">
<p>The standard big.Int does not implement sql/driver.Valuer interface,
which make it not usable when querying or doing update/insert with
database.</p>
</div>
<div class="paragraph">
<p>This commit extend the big.Int and simplify creating new Int from any
values using NewInt().</p>
</div>
<div class="paragraph">
<p>Also, make it support marshal/unmarshal JSON</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_9">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>sql: make the column filename on table _migration as primary key</p>
<div class="paragraph">
<p>This will allow deleting the record by filename instead of requiring
all columns.</p>
</div>
</li>
<li>
<p>http: add the Total field to EndpointResponse</p>
<div class="paragraph">
<p>The Total field contains the total number of all records, while the
Count fields only contains the total number of records in Data.</p>
</div>
</li>
<li>
<p>http: add field Page to EndpointResponse</p>
<div class="paragraph">
<p>The page field contains the requested page on current response.
If page is from request then the offset will be set to page times limit.</p>
</div>
<div class="paragraph">
<p>While at it, move the field comment to its declaration.</p>
</div>
</li>
<li>
<p>big: allow creating new Rat from uint64 and *big.Int</p>
</li>
<li>
<p>ssh: check for empty private key file on Get and Put</p>
<div class="paragraph">
<p>If the private key file is empty, skip it for being added as parameter
of scp command.  This is to prevent warning message on user side.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_chores_5">Chores</h3>
<div class="ulist">
<ul>
<li>
<p>memfs: update the test ContentType for JavaScript files</p>
<div class="paragraph">
<p>The latest Go set the content type for JavaScript file as
"text/javascript; charset=utf-8", not "application/javascript".</p>
</div>
</li>
<li>
<p>paseto: replace le64() function with binary.Write()</p>
<div class="paragraph">
<p>The le64() return the string representation of uint64 in little endian,
which is basically binary.Write with parameter output buffer,
LittleEndian, and input value.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_25_1_2021_04_06">share v0.25.1 (2021-04-06)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Set the minimum Go version to 1.16</p>
</div>
<div class="paragraph">
<p>Commit 4cdd6b01c1 "http: add method to generate standard HTTP request
on Client" use the io.NopCloser thats only available in Go 1.16.  Either
we move backward by replacing it with ioutil.NopCloser or we move forward
by setting the minimum Go version to 1.16.</p>
</div>
<div class="paragraph">
<p>We choose to move forward.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_25_0_2021_04_06">share v0.25.0 (2021-04-06)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_breaking_changes_8">Breaking changes</h3>
<div class="ulist">
<ul>
<li>
<p>all: refactoring the test.Assert and test.AssertBench signature</p>
<div class="paragraph">
<p>Previously, the test.Assert and test.AssertBench functions has the
boolean parameter to print the stack trace of test in case its not equal.</p>
</div>
<div class="paragraph">
<p>Since this parameter is not mandatory and its usually always set to
"true", we remove them from function signature to simplify the call
to Assert and AssertBench.</p>
</div>
</li>
<li>
<p>all: refactoring http.Client methods signature</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously, parameters to method Delete, Get, Post, PostForm, PostFormData,
PostJSON, Put, and PutJSON are in the following order:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>(headers, path, params)</pre>
</div>
</div>
<div class="paragraph">
<p>This is sometimes confusing. To make it better and works with format
of HTTP request header,</p>
</div>
<div class="listingblock">
<div class="content">
<pre>METHOD PATH
HEADERS

PARAMS</pre>
</div>
</div>
<div class="paragraph">
<p>we move the path to the first parameter and headers as the second
parameter, so the call to client methods would be</p>
</div>
<div class="literalblock">
<div class="content">
<pre>(path, headers, params)</pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>http: remove parameter contentType on Client method Put</p>
<div class="paragraph">
<p>Since one can set the Content-Type in parameter headers, this parameter is
become redundant.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_new_features_8">New features</h3>
<div class="ulist">
<ul>
<li>
<p>http: add method to generate standard HTTP request on Client</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The GenerateHttpRequest method generate http.Request instance from
method, path, requestType, headers, and params.</p>
</div>
<div class="paragraph">
<p>For HTTP method GET, CONNECT, DELETE, HEAD, OPTIONS, or TRACE; the params
value should be nil or url.Values.
If its url.Values, then the params will be encoded as query parameters.</p>
</div>
<div class="paragraph">
<p>For HTTP method is PATCH, POST, or PUT; the params will converted based on
requestType rules below,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If requestType is RequestTypeQuery and params is url.Values it will be
added as query parameters in the path.</p>
</li>
<li>
<p>If requestType is RequestTypeForm and params is url.Values it will be
added as URL encoded in the body.</p>
</li>
<li>
<p>If requestType is RequestTypeMultipartForm and params type is
map[string][]byte, then it will be converted as multipart form in the
body.</p>
</li>
<li>
<p>If requestType is RequestTypeJSON and params is not nil, the params will
be encoded as JSON in body.</p>
</li>
</ul>
</div>
</div>
</div>
</li>
<li>
<p>ssh: ask for passphrase if private key is encrypted on generateSigners</p>
<div class="paragraph">
<p>In case the private key defined in IdentityFile is encrypted, prompt
for the passphrase on the screen and read it from stdin using
terminal.ReadPassword().</p>
</div>
<div class="paragraph">
<p>This changes also remove call to generateSigners on postConfig(),
instead invoke it from NewClient() to minimize multiple calls to
generateSigners().</p>
</div>
</li>
<li>
<p>ssh: use the SSH agent to authenticate on NewClient</p>
<div class="paragraph">
<p>Previously, the client use the IdentityFile on ConfigSection to
Authenticate with the remote SSH server.  In case the IdentityFile is
Encrypted with passphrase, each time NewClient is invoked it will ask
For passphrase.</p>
</div>
<div class="paragraph">
<p>To minimize inputing the passphrase, we check if current use run the
SSH agent through SSH_AUTH_SOCK environment variable and use the agent
To generate signers.</p>
</div>
<div class="paragraph">
<p>This method need manual key added by user to SSH agent before calling
NewClient to make it works.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_10">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>xmlrpc: add debug statements to print request and response</p>
<div class="paragraph">
<p>The debug level is set minimum to 3. If its set it will print the
request and response to standard output.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_24_0_2021_03_06">share v0.24.0 (2021-03-06)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_breaking_changes_9">Breaking changes</h3>
<div class="ulist">
<ul>
<li>
<p>http: add prefix Header to constants AcceptEncoding and ContentEncoding</p>
<div class="paragraph">
<p>Since both of those constants are used only for HTTP header, it could
be more clear if we prefix it with "Header".</p>
</div>
</li>
<li>
<p>sql: change the parameter ExtractSQLFields to driver name</p>
<div class="paragraph">
<p>Previously, we use the string as parameter to set the returned place
holders.</p>
</div>
<div class="paragraph">
<p>This commit changes the parameter to the driver name so if the value
is "postgres" the place holders will be returned as counter, for example
"$1", "$2", and so on.</p>
</div>
</li>
<li>
<p>http: rename "GenericResponse" to "EndpointResponse"</p>
<div class="paragraph">
<p>Well, the hard thing in software is naming a thing.  Using the term
Generic is too generic, so we change it to make it closer with Endpoint.</p>
</div>
</li>
<li>
<p>http: refactoring parameters on Callback and CallbackErrorHandler</p>
<div class="paragraph">
<p>Previously, the parameters to Callback has three types:
the http.ResponseWriter, *http.Request, and []byte for response body.
Not only the type names are long, there is no information on the
registered Endpoint on the receiver of Callback.</p>
</div>
<div class="paragraph">
<p>This changes wrap the three parameters into single type EndpointRequest
with addition field Endpoint, which contains the registered Endpoint.</p>
</div>
<div class="paragraph">
<p>On the CallbackErrorHandler we also have three parameters, but instead
of request body we have an error.</p>
</div>
<div class="paragraph">
<p>This changes store the error for CallbackErrorHandler inside
EndpointRequest.Error field.</p>
</div>
</li>
<li>
<p>http: move the CORS options to separate struct</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_new_features_9">New features</h3>
<div class="ulist">
<ul>
<li>
<p>http: add methods IPAddressOfRequest and ParseXForwardedFor</p>
<div class="paragraph">
<p>The IPAddressOfRequest get the client IP address from HTTP request header
"X-Real-IP" or "X-Forwarded-For" or from Request.RemoteAddr, which ever
non-empty first.</p>
</div>
<div class="paragraph">
<p>The ParseXForwardedFor parse the HTTP header "X-Forwarded-For" value from
the following format "client, proxy1, proxy2" into client address and
list of proxy addressess.</p>
</div>
</li>
<li>
<p>api/slack: create new client for webhook</p>
<div class="paragraph">
<p>Unlike PostWebhook API which is close and open one connection at the
time, the WebhookClient is keep open.</p>
</div>
<div class="paragraph">
<p>Use the WebhookClient for long running program that post message every
minutes or seconds.</p>
</div>
</li>
<li>
<p>mlog: implement MultiLogger</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>MultiLogger represent a single log writer that write to multiple outputs.
MultiLogger can have zero or more writers for standard output (normal log)
and zero or more writers for standard error.</p>
</div>
<div class="paragraph">
<p>The MultiLogger is buffered to minimize waiting time when writing to
multiple writers that have different latencies.
For example, if we have one writer to os.Stdout, one writer to file, and
one writer to network; the writer to network may take more time to finish
than to os.Stdout and file, which may slowing down the program if we want
to wait for all writes to finish.</p>
</div>
<div class="paragraph">
<p>For this reason, do not forget to call Flush when your program exit.</p>
</div>
<div class="paragraph">
<p>The default MultiLogger use time.RFC3339 as the default time layout, empty
prefix, os.Stdout for the output writer, and os.Stderr for the error
writer.</p>
</div>
<div class="paragraph">
<p>Format of written log,</p>
</div>
<div class="literalblock">
<div class="content">
<pre>[time] [prefix] &lt;message&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The time and prefix only printed if its not empty, and the single space is
added for convenience.
Unlike standard log package, this package does not add new line to the end
of message if its not exist.</p>
</div>
</div>
</div>
</li>
<li>
<p>http: export the HandleFS method</p>
<div class="paragraph">
<p>The HandleFS handle the request as resource in the memory file system.
This method only works if the Server.Memfs is not nil.</p>
</div>
<div class="paragraph">
<p>If the request Path exists in file system, it will return 200 OK with the
header Content-Type set accordingly to the detected file type and the
response body set to the content of file.
If the request Method is HEAD, only the header will be sent back to client.</p>
</div>
<div class="paragraph">
<p>If the request Path is not exist it will return 404 Not Found.</p>
</div>
</li>
<li>
<p>clise: add method Pop</p>
<div class="paragraph">
<p>The Pop method remove the last Push()-ed item and return it to caller.
It will return nil if no more item inside it.</p>
</div>
</li>
<li>
<p>ini: add support for marshaling slice of struct</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Given a struct with exported field is slice of struct and tagged with
section and sub-section, the exported field will be marshalled as,</p>
</div>
<div class="literalblock">
<div class="content">
<pre>[section "sub"]
field = value</pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>ini: add support for marshaling pointer to struct and to time.Time</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Given the following field struct with tag,</p>
</div>
<div class="literalblock">
<div class="content">
<pre>V *T `ini:"sec:sub"</pre>
</div>
</div>
<div class="paragraph">
<p>If the V is not nil, it will marshal it into,</p>
</div>
<div class="literalblock">
<div class="content">
<pre>[sec "sub"]
&lt;field name or tag&gt; = &lt;field value&gt;</pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>ini: add support for un-marshaling to struct and slice of struct</p>
</li>
<li>
<p>big: add method that implement sql/driver.Valuer for type Rat</p>
<div class="paragraph">
<p>The Rat.Value() return the value as []byte.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_11">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>clise: make all methods safe for concurrent use</p>
</li>
<li>
<p>http: add fields for paging on GenericResponse</p>
<div class="paragraph">
<p>If the response is paging, contains more than one item in data, one
can set the current status of paging in field Offset, Limit, and Count.</p>
</div>
<div class="paragraph">
<p>The Offset field contains the start of paging.
The Limit field contains the maximum number of records per page.
The Count field contains the total number of records.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_6">Bug fixes</h3>
<div class="ulist">
<ul>
<li>
<p>reflect: check using equal statement on IsNil</p>
<div class="paragraph">
<p>Beside using IsNil(), return the last check using "v == nil".</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_23_0_2021_02_05">share v0.23.0 (2021-02-05)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This release bring major refactoring to package memfs to allow embedding two
or more directories in single package.</p>
</div>
<div class="paragraph">
<p>The minimum Go version is increased to 1.14.</p>
</div>
<div class="sect2">
<h3 id="_breaking_changes_10">Breaking changes</h3>
<div class="ulist">
<ul>
<li>
<p>memfs: refactoring, allow multiple instances of memfs in single package</p>
<div class="paragraph">
<p>Previously, the generated Go code from memfs can be used only once
on the package that use it.  For example, if we have two instances of
memfs.MemFS and both of them call GoGenerate(), when we load them back
again only the last one will be active and set the global variable
memfs.GeneratedPathNode.</p>
</div>
<div class="paragraph">
<p>This changes refactoring on how we use memfs by storing the
generated path node into variable that is defined by user and pass
them to New Options.</p>
</div>
</li>
<li>
<p>memfs: remove field WithContent</p>
<div class="paragraph">
<p>The field WithContent is not necessary if we set MaxFileSize to negative
value.</p>
</div>
</li>
<li>
<p>http: embed the memfs.Options into ServerOptions</p>
<div class="paragraph">
<p>This is to minimize duplicate on fields names and give clear distinction
between options for Server and options for serving files on memory using
memfs.</p>
</div>
</li>
<li>
<p>io: embed the memfs.Options into DirWatcher</p>
<div class="paragraph">
<p>This is to minimize duplicate configuration between DirWatcher and
memfs, and to allow clear distinction between which options that
affect the directory tree and options for DirWatcher.</p>
</div>
</li>
<li>
<p>memfs: allow AddFile to set internal path</p>
<div class="paragraph">
<p>Previously, AddFile set the internal path equal to path of file to be
included.  This may cause conflict if the file is already included
due to the same sys path but different internal path.</p>
</div>
<div class="paragraph">
<p>This commit add parameter internalPath to set custom internal path in
the memfs map.</p>
</div>
</li>
<li>
<p>memfs: refactoring Go generate code to use memfs.MemFS instance</p>
<div class="paragraph">
<p>Instead of using memfs.PathNode, which is confusing for new user
(what is PathNode?), we actually can use memfs.MemFS instance.</p>
</div>
<div class="paragraph">
<p>This effect on how we use memfs in http package.</p>
</div>
</li>
<li>
<p>dns: change the SOA field in ZoneFile to non-pointer</p>
<div class="paragraph">
<p>The reason we use pointer for SOA record is so we can save them only
if its not nil.  A nil SOA record cause the generated JSON become "null"
and this is make the consumer of ZoneFile do more work, checking for the
null and initialize it when required.</p>
</div>
<div class="paragraph">
<p>This changes, make the SOA record to non-nil and we save the record only
if the MName field is not empty.</p>
</div>
</li>
<li>
<p>dns: replace master word with zone</p>
<div class="paragraph">
<p>This is for consistency for type and variable names.</p>
</div>
</li>
<li>
<p>sql: sort returned names on ExtractSQLFields sorted in ascending</p>
<div class="paragraph">
<p>This is to make sure that any test that use the package always
predictable.</p>
</div>
<div class="paragraph">
<p>While at it, add paramter to change placeholder on ExtractSQLFields.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_new_features_10">New features</h3>
<div class="ulist">
<ul>
<li>
<p>http: add method Post on client</p>
<div class="paragraph">
<p>The Post method send the POST request to path without setting
"Content-Type".</p>
</div>
</li>
<li>
<p>lib/clise: new package that implement circular slice</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>A circular slice is a slice that have fixed size.
An append to slice that has reached its length will overwrite and start
again from index 0.</p>
</div>
<div class="paragraph">
<p>For example, a clise with size 5,</p>
</div>
<div class="literalblock">
<div class="content">
<pre>c := clise.New(5)
c.Push(1, 2, 3, 4, 5)
fmt.Printf("%v\n", c.Slice()) // [1 2 3 4 5]</pre>
</div>
</div>
<div class="paragraph">
<p>If we push another item, it will overwrite the first index,</p>
</div>
<div class="literalblock">
<div class="content">
<pre>c.Push(6)
fmt.Printf("%v\n", c.Slice()) // [6 2 3 4 5]</pre>
</div>
</div>
<div class="paragraph">
<p>See the examples for usage of the package.</p>
</div>
</div>
</div>
</li>
<li>
<p>time: add function UnixMicro that return UNIX time in micro seconds</p>
</li>
<li>
<p>api/slack: simple API for sending message to Slack using only
standard packages.</p>
</li>
<li>
<p>runes: add function to inverse the slice of rune</p>
<div class="paragraph">
<p>The Inverse function reverse the order of slice of rune without
allocating another slice.</p>
</div>
</li>
<li>
<p>big: add method Humanize</p>
<div class="paragraph">
<p>The Humanize method return the r as string with custom thousand and
decimal separator.</p>
</div>
</li>
<li>
<p>big: add method to round fraction to nearest non-zero value</p>
<div class="paragraph">
<p>The RoundNearestFraction does not require precision parameter, like in
other rounds function, but it figure it out based on the last non-zero
value from fraction.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_12">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>dns: change the error messages on ResourceRecord initAndInitialize</p>
<div class="paragraph">
<p>This change make the error message more readable and understandable by
consumer</p>
</div>
</li>
<li>
<p>dns: add method to get list of non-local caches in the Server</p>
<div class="paragraph">
<p>The CachesLRU method return the list of non-local caches ordered by
the least recently used.</p>
</div>
<div class="paragraph">
<p>This changes affect the answer type which must be exported, including
most of its fields, so consumer can access it.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_7">Bug fixes</h3>
<div class="ulist">
<ul>
<li>
<p>sql: check nil on Migrate parameter "fs" using reflect.IsNil</p>
<div class="paragraph">
<p>If we pass nil pointer of type to fs, the if condition will not true
and this cause panic because fs is not nil.</p>
</div>
</li>
<li>
<p>http: fix the package documentation</p>
<div class="paragraph">
<p>The RegisterXxx methods on Server has been replaced with single method,
RegisterEndpoint.</p>
</div>
</li>
<li>
<p>dns: fix saving the TXT record file on zone file</p>
<div class="paragraph">
<p>The TXT record value must be wrapped with quote when stored on zone
file.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_22_0_2021_01_06">share v0.22.0 (2021-01-06)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_breaking_changes_11">Breaking changes</h3>
<div class="ulist">
<ul>
<li>
<p>contact: remove unused package proofn</p>
</li>
<li>
<p>sql: change the new client function parameter into struct of options.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_new_features_11">New features</h3>
<div class="ulist">
<ul>
<li>
<p>cmd: add new CLI "totp"</p>
<div class="paragraph">
<p>The totp is a program to generate Time-based One-time Password from
secret key.</p>
</div>
</li>
<li>
<p>totp: add method to generate n number of passwords</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_13">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>http: print client request if debug value is equal or greater than 2.</p>
<div class="paragraph">
<p>If user set DEBUG environment variable or debug.Value to 2 or greater,
the http Client will print the request (header and body) to the
standard output.</p>
</div>
</li>
<li>
<p>ssh: print the private key file that has an error when generating signers</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_21_0_2020_12_06">share v0.21.0 (2020-12-06)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_breaking_changes_12">Breaking changes</h3>
<div class="ulist">
<ul>
<li>
<p>test: refactoring Assert with better error message</p>
<div class="paragraph">
<p>The new Assert function use the reflect.DoEqual that return an error
which describe which field have unmatched value.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_new_features_12">New features</h3>
<div class="ulist">
<ul>
<li>
<p>http: allow Endpoint to register custom error handler</p>
<div class="paragraph">
<p>The new field ErrorHandler on Endpoint allow the implementor to define
their own function to handler error from Endpoint.Call.</p>
</div>
<div class="paragraph">
<p>If the ErrorHandler is nil it will default to DefaultErrorHandler.</p>
</div>
</li>
<li>
<p>totp: new package that implement TOTP protocol</p>
<div class="paragraph">
<p>Package totp implement Time-Based One-Time Password Algorithm based on
RFC 6238.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_8">Bug fixes</h3>
<div class="ulist">
<ul>
<li>
<p>parser: fix Line method that always return non-empty line</p>
<div class="paragraph">
<p>In case of content end without new line, for example "anb", the Line()
method always return "b, 0" on the last line.</p>
</div>
</li>
<li>
<p>smtp: update the expired test certificate</p>
</li>
<li>
<p>websocket: create buffered channel for running queue.</p>
<div class="paragraph">
<p>This is to fix Stop() method waiting for running channel to be consumed.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_14">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>big: update the latest expected error message with Go tip</p>
</li>
<li>
<p>http: add an example on how to write custom HTTP status code</p>
<div class="paragraph">
<p>The example show how to use http.ResponseWriter.WriteHeader to write
custom HTTP status code instead of relying on errors.E.</p>
</div>
</li>
<li>
<p>net: always return the host name or IP on ParseIPPort.</p>
<div class="paragraph">
<p>Previously, if the address is an IP address the returned value is empty,
for example "127.0.0.1" will return empty host but with non-nil IP and
port.</p>
</div>
<div class="paragraph">
<p>This changes always return the host either as host name (the same as
paremeter) or valid IP address.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_chores_6">Chores</h3>
<div class="ulist">
<ul>
<li>
<p>all: replace the tasks to serve and generate docs using ciigo as library</p>
<div class="paragraph">
<p>This way, one does not need to install ciigo binary, only require Go
tools.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_20_1_2020_11_08">share v0.20.1 (2020-11-08)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_bug_fixes_9">Bug fixes</h3>
<div class="ulist">
<ul>
<li>
<p>websocket: set TLSConfig to nil if Endpoint scheme is not https or wss.</p>
<div class="paragraph">
<p>If user set TLSConfig but the Endpoint is not start with "https" or "wss",
client open() method may return an error "Connect: tls: first record does
not look like a TLS handshake".</p>
</div>
</li>
<li>
<p>paseto: add 5 seconds time drift when validating JSONToken</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_15">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>big: add method RoundToNearestAway and RoundToZero</p>
<div class="paragraph">
<p>RoundToNearestAway round r to n digit precision using nearest away mode,
where mantissa is accumulated by the last digit after precision.
For example, using 2 digit precision, 0.555 would become 0.56.</p>
</div>
<div class="paragraph">
<p>RoundToZero round r to n digit precision using to zero mode.
For example, using 2 digit precision, 0.555 would become 0.55.</p>
</div>
</li>
<li>
<p>parser: add Stop method</p>
<div class="paragraph">
<p>The Stop method return the remaining unparsed content and its last
position, and then call Close to reset the internal state back to zero.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_chores_7">Chores</h3>
<div class="ulist">
<ul>
<li>
<p>paseto: fix linter warnings</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_20_0_2020_10_05">share v0.20.0 (2020-10-05)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_new_features_13">New features</h3>
<div class="ulist">
<ul>
<li>
<p>lib/paseto: a simple, ready to use, implementation of Platform-Agnostic
SEcurity TOkens</p>
<div class="paragraph">
<p>This implementation only support PASETO Protocol v2.</p>
</div>
<div class="paragraph">
<p>This library focus on how to sign and verify data, everything else is
handled and filled automatically.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_16">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>dns: serve DoT without SSL if server is behind proxy or tlsConfig is null.</p>
<div class="paragraph">
<p>Previously we only check for tlsConfig, if its null the DoT server
will not running.
There is a use case where the SSL terminated by proxy and the connection
is forwarded to DNS server, so this changes accommodated it.</p>
</div>
</li>
<li>
<p>http: increase the debug level from 2 to 3</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_19_0_2020_09_08">share v0.19.0 (2020-09-08)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_breaking_changes_13">Breaking changes</h3>
<div class="ulist">
<ul>
<li>
<p>dns: unexport the Messsage&#8217;s Packet field</p>
</li>
<li>
<p>dns: change the HostsFile Messages to list of ResourceRecord</p>
</li>
<li>
<p>dns: unexport the master file path field</p>
</li>
<li>
<p>dns: refactoring the ResourceRecord values from []byte to string</p>
<div class="paragraph">
<p>There are two reasons for this changes.  First, to allow JSON encoded
of ResourceRecord.Value without encoded to base64.</p>
</div>
<div class="paragraph">
<p>Second, to minimize unreleased packet due to the backing storage is
still used when assigned to Value (or any []byte field in RDataXXX).</p>
</div>
</li>
<li>
<p>dns: dns: split between MasterFile and masterParser</p>
<div class="paragraph">
<p>While at it add field Records that contains unpacked ResourceRecord as
mapping between domain and ResourceRecord.</p>
</div>
<div class="paragraph">
<p>This is useful for client that need to edit the RR in MasterFile.</p>
</div>
<div class="paragraph">
<p>This changes also unexport the Messages field, to access it use the method
Messages.</p>
</div>
</li>
<li>
<p>websocket: move the server handler to ServerOptions</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_new_features_14">New features</h3>
<div class="ulist">
<ul>
<li>
<p>dns: add method to remove local caches by names on Server</p>
</li>
<li>
<p>dns: add method to search caches</p>
</li>
<li>
<p>dns: add method Delete to MasterFile</p>
</li>
<li>
<p>dns: add method to remove RR from cache and master file</p>
</li>
<li>
<p>dns: add method to save the master records to file</p>
</li>
<li>
<p>dns: implement method to add new RR to master file</p>
</li>
<li>
<p>dns: add method to update/insert resource record to caches</p>
</li>
<li>
<p>dns: add method to initialize and validate ResourceRecord</p>
</li>
<li>
<p>websocket: add server options to change the connect and status paths</p>
<div class="paragraph">
<p>Previously, there is only one option for server, the port where it will
listen.</p>
</div>
<div class="paragraph">
<p>This changes add option to change the connect path (default to "/"
previously) and new path and handler for retrieving server status.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_10">Bug fixes</h3>
<div class="ulist">
<ul>
<li>
<p>dns: fix parsing SOA resource record data from master file</p>
</li>
<li>
<p>dns: stop all forwarders on Stop()</p>
</li>
<li>
<p>http: write the HTTP status code after setting content-type on error</p>
</li>
<li>
<p>ini: ignore the last empty line on unsetAll</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_18_0_2020_08_06">share v0.18.0 (2020-08-06)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_breaking_changes_14">Breaking changes</h3>
<div class="ulist">
<ul>
<li>
<p>big: add global flag MarshalJSONAsString</p>
<div class="paragraph">
<p>MarshalJSONAsString define the default return behaviour of MarshalJSON().
If its true (the default) the returned JSON format will encapsulated in
double quote, as string instead of as numeric.</p>
</div>
</li>
<li>
<p>dns: refactoring resource record fields</p>
</li>
<li>
<p>http: do not return error based on response code</p>
<div class="paragraph">
<p>The error in doRequest should be about connection error, everything
else should be handled by user.</p>
</div>
</li>
<li>
<p>http: allow setting response type when registering PUT</p>
<div class="paragraph">
<p>User of this library may want to return something and they will suprised
if the library always set the response type to None.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_11">Bug fixes</h3>
<div class="ulist">
<ul>
<li>
<p>http: fix panic if Request.Form is not initialized on Endpoint.call</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_17">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>dns: add method to create Message from hostname and list of addresses</p>
</li>
<li>
<p>dns: add method to remove caches by names on Server</p>
</li>
<li>
<p>http: add method Put for Client</p>
</li>
<li>
<p>http: add method to convert RequestMethod to string</p>
</li>
<li>
<p>parser: add method to get single line</p>
</li>
<li>
<p>strings: add function to delete a value from slice of string</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_17_0_2020_07_05">share v0.17.0 (2020-07-05)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_breaking_changes_15">Breaking changes</h3>
<div class="ulist">
<ul>
<li>
<p>dns: replace RDataText with plain []byte</p>
</li>
<li>
<p>http: add parameter headers to client methods</p>
</li>
<li>
<p>http: return the http.Response as the first parameter</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_12">Bug fixes</h3>
<div class="ulist">
<ul>
<li>
<p>http: initialize TLSClientConfig only if insecure is true</p>
</li>
<li>
<p>io: truncate file on Copy</p>
</li>
<li>
<p>websocket: fix race on pingTicker when stopping server</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_18">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>http: check for possible index.html file on getFSNode</p>
</li>
<li>
<p>http: add method Delete</p>
</li>
<li>
<p>http: add method Stop for HTTP server</p>
</li>
<li>
<p>http: check the number of bytes written on ResponseWriter.Write</p>
</li>
<li>
<p>http: log error if path not exist if debug value is set to 3 or greater</p>
</li>
<li>
<p>smtp: check for EOF when receiving data from server</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_16_0_2020_06_05">share v0.16.0 (2020-06-05)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_breaking_changes_16">Breaking changes</h3>
<div class="ulist">
<ul>
<li>
<p>dns: refactoring loading hosts and master files</p>
<div class="paragraph">
<p>Instead of as methods in Server, we detach the LoadHostDir and
LostMasterDir into functions that return list of filename and their
content.</p>
</div>
</li>
<li>
<p>dns: disable serving DoH and DoT if port is not set (0)</p>
<div class="paragraph">
<p>Previously, if HTTPPort or TLSPort is not set (0) we set it to default
value and keep serving the DNS over HTTP and TLS.  Sometimes, user may
want to serve DNS over UDP only.</p>
</div>
<div class="paragraph">
<p>This changes disable serving DNS over HTTP (DoH) and TLS (DoT) if port
is not set, or 0.</p>
</div>
</li>
<li>
<p>email: rename ParseAddress function to ParseMailboxes</p>
</li>
<li>
<p>http: add parameter "insecure" when creating new client</p>
</li>
<li>
<p>ini: fix inconsistencies between empty string and boolean true</p>
<div class="paragraph">
<p>In Git specification, an empty variable is equal to boolean true.
This cause inconsistency between empty string and boolean true.</p>
</div>
</li>
<li>
<p>memfs: simplify the API, add directory parameter to New</p>
<div class="paragraph">
<p>This changes add parameter directory to be mounted in New(), so user
did not need to call Mount manually</p>
</div>
<div class="paragraph">
<p>This cause the Mount method and its sibling, Unmount and IsMounted
become unneeded, so we remove them.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_13">Bug fixes</h3>
<div class="ulist">
<ul>
<li>
<p>api/telegram/bot: fix  request parameter on GetMyCommands</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_new_features_15">New features</h3>
<div class="ulist">
<ul>
<li>
<p>bytes: add function MergeSpaces</p>
<div class="paragraph">
<p>The function MergeSpaces will convert sequences of white space into
single space ' '.</p>
</div>
</li>
<li>
<p>email: add methods to unmarshal/marshal Mailbox from/to JSON</p>
</li>
<li>
<p>email: add function to parse single mailbox</p>
</li>
<li>
<p>email: add function to create multipart text and HTML message</p>
</li>
<li>
<p>http: support CORS with white list of origin and headers</p>
</li>
<li>
<p>ini: add method UnsetAll to remove all variables in section and/or
subsection that match with the key</p>
</li>
<li>
<p>ini: add method to Unmarshal ini values to struct</p>
</li>
<li>
<p>os/exec: new package to simplify the standard "os/exec"</p>
<div class="paragraph">
<p>New extension to standard package is function ParseCommandArgs() that
receive input as string and return itas command and list of arguments.
Unlike strings.Fields() which only separated the field by space,
ParseCommandArgs can detect possible single, double, or back quotes.</p>
</div>
<div class="paragraph">
<p>Another extension is Run() function that accept the string command
to be executed and their standard output and error.</p>
</div>
</li>
<li>
<p>sql: add method to migrate database schema</p>
<div class="paragraph">
<p>The Migrate method migrate the database using list of SQL files inside
a directory.
Each SQL file in directory will be executed in alphabetical order based on
the last state.</p>
</div>
<div class="paragraph">
<p>The state of migration will be saved in table "_migration" with the SQL
file name that has been executed and the timestamp.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_19">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>api/telegram/bot: delete webhook upon setting new webhook</p>
</li>
<li>
<p>dns: do not load hidden hosts and master file</p>
<div class="paragraph">
<p>Previously, the LoadHostDir and LoadMasterDir load all files inside
the directory without checking if its hidden (starting with dot) or not.</p>
</div>
<div class="paragraph">
<p>This changes make the hidden file not loaded so one can disable it
temporarily by prefixing it with dot.</p>
</div>
</li>
<li>
<p>ini: make the add method append the variable after existing same key</p>
</li>
<li>
<p>memfs: make the Node Readdir works when calling from generated Go code</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously, the Go generated code from call to GoGenerate() set only
mapping of path to node.  Calling Readdir() using http.File using</p>
</div>
<div class="literalblock">
<div class="content">
<pre>root, err := mfs.Open("/")
fis, err := root.Readdir(0)</pre>
</div>
</div>
<div class="paragraph">
<p>will return nil on fis.</p>
</div>
<div class="paragraph">
<p>This changes add all child nodes to generated node.</p>
</div>
</div>
</div>
</li>
<li>
<p>websocket: allow "https" scheme on Client&#8217;s Endpoint</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_15_0_2020_05_04">share v0.15.0 (2020-05-04)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_breaking_changes_17">Breaking changes</h3>
<div class="ulist">
<ul>
<li>
<p>big: check for zero length slice of byte or string on toRat</p>
</li>
<li>
<p>ssh: replace the ClientConfig with ConfigSection</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_new_features_16">New features</h3>
<div class="ulist">
<ul>
<li>
<p>ssh: implement SSH client configuration parser&#8201;&#8212;&#8201;ssh_config(5)</p>
</li>
<li>
<p>api/telegram/bot: Go package for Telegram API Bot</p>
</li>
<li>
<p>http: implement a simplified HTTP client</p>
</li>
<li>
<p>net/html: new package to simplify the golang.org/x/net/html</p>
<div class="paragraph">
<p>The x/net/html package currently only provide bare raw functionalities
to iterate tree, there is no check for empty node, no function to
get attribute by name, and no simple way to iterate tree without looping it
manually.</p>
</div>
<div class="paragraph">
<p>This package extends the package by adding methods to get node&#8217;s attribute
by name, get the first non-empty child, get the next non-empty sibling, and
to iterate each node in the tree from top to bottom.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_20">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>big: return "0" instead of "&lt;nil&gt;" on Rat.String()</p>
</li>
<li>
<p>big: return false if Rat is nil on IsGreaterThanZero</p>
</li>
<li>
<p>http: add parameter to set default client&#8217;s headers</p>
</li>
<li>
<p>websocket: add method to gracefully Close the client connection</p>
</li>
<li>
<p>websocket: add routine that send PING control frame on Connect</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_14">Bug fixes</h3>
<div class="ulist">
<ul>
<li>
<p>reflect: remove checking for method IsEqual on type reflect.Ptr</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_14_0_2020_04_03">share v0.14.0 (2020-04-03)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_breaking_changes_18">Breaking changes</h3>
<div class="ulist">
<ul>
<li>
<p>http: simplify server Endpoint registrations</p>
<div class="paragraph">
<p>Previously, each endpoint with method DELETE, GET, PATCH, POST, and PUT
require calling different call for registration.  This change simplify
it to one call only, "RegisterEndpoint", and the registration process
will be handled automatically based on value on field Method.</p>
</div>
</li>
<li>
<p>mining/math: move the package from "lib/mining/" to "lib/" directory</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_new_features_17">New features</h3>
<div class="ulist">
<ul>
<li>
<p>debug: add a wrapper for starting and stopping CPU profile</p>
</li>
<li>
<p>math/big: new package that extends the capabilities of "math/big"</p>
<div class="paragraph">
<p>The "big" package add custom global precision, rounding mode, and number
of digit precision after decimal point for all instance of Float that
use the package.</p>
</div>
</li>
<li>
<p>reflect: new package that extends the standard reflect</p>
<div class="paragraph">
<p>This package add new interface "Equaler", it is an interface that
have single method "IsEqual()".</p>
</div>
<div class="paragraph">
<p>Also, we have new function "IsNil(interface{})" that will return true
if the value in interface{} is nil.</p>
</div>
</li>
<li>
<p>strings: add function SingleSpace</p>
<div class="paragraph">
<p>The SingleSpace function convert all sequences of white spaces into
single space ' '.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_21">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>http: embed the standard http package instead of separate field</p>
</li>
<li>
<p>hunspell: return the stem instead of root word on Spell() method</p>
</li>
<li>
<p>hunspell: add Stem() method to Spell and Stem</p>
<div class="paragraph">
<p>The Stem() method reduce inflected (or sometimes derived) words to
their word stem, base, or root form.</p>
</div>
</li>
<li>
<p>hunspell: add Analyze() method to Spell and Stem</p>
<div class="paragraph">
<p>The Analyze() method will return list of morphological fields of the
word.</p>
</div>
</li>
<li>
<p>strings: check for other white spaces on MergeSpaces</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_15">Bug fixes</h3>
<div class="ulist">
<ul>
<li>
<p>http: fix the content-length header not set if file is not cached</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_13_0_2020_03_11">share v0.13.0 (2020-03-11)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_breaking_changes_19">Breaking changes</h3>
<div class="paragraph">
<p>Set the minimum Go version to 1.13.</p>
</div>
</div>
<div class="sect2">
<h3 id="_new_features_18">New features</h3>
<div class="ulist">
<ul>
<li>
<p>hunspell: a library to parse the Hunspell file format</p>
</li>
<li>
<p>parser: provide a common text parser, using delimiters</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_22">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>dns: use net.Addr for primary and fallback UDP/tCP addresses</p>
</li>
<li>
<p>dns: change the mark of input/output in log output</p>
</li>
<li>
<p>io: add function to copy file</p>
</li>
<li>
<p>time: add functions to get Unix time in milliseconds (int64 and string)</p>
</li>
<li>
<p>websocket: allow custom TLS configuration on client</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_16">Bug Fixes</h3>
<div class="ulist">
<ul>
<li>
<p>dns: fix handling server without fallback forwarder</p>
</li>
<li>
<p>dns: check for nil DNS-over-TLS server on server&#8217;s Stop</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_12_0_2020_02_13">share v0.12.0 (2020-02-13)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_breaking_changes_20">Breaking changes</h3>
<div class="ulist">
<ul>
<li>
<p>bytes: move function JSONEscape and JSONUnescape to package json</p>
</li>
<li>
<p>strings: move JSONEscape and JSONUnescape to package json</p>
</li>
<li>
<p>time: change the Microsecond return type from int to int64</p>
</li>
<li>
<p>websocket: change the RouteHandler signature to return Response</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_new_features_19">New features</h3>
<div class="ulist">
<ul>
<li>
<p>json: new packages to work with JSON</p>
</li>
<li>
<p>sql: a new package as an extension to "database/sql"</p>
</li>
<li>
<p>xmlrpc: new package for working with XML-RPC</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_23">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>strings: add function to reverse a string</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_17">Bug fixes</h3>
<div class="ulist">
<ul>
<li>
<p>dns: fix index out of range when unpacking OPT RR</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_11_0_2019_12_26">share v0.11.0 (2019-12-26)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_breaking_changes_21">Breaking changes</h3>
<div class="ulist">
<ul>
<li>
<p>dns: merge Start and Wait into ListenAndServe</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_new_features_20">New features</h3>
<div class="ulist">
<ul>
<li>
<p>memfs: implement http.FileSystem on MemFS</p>
</li>
<li>
<p>memfs: implement http.File on Node</p>
</li>
<li>
<p>memfs: implement os.FileInfo on Node</p>
</li>
<li>
<p>memfs: implement io.Closer, io.Reader, and io.Seeker on Node</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_24">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>dns: allocate raw packet on receive</p>
</li>
<li>
<p>dns: log the number of pruned records</p>
</li>
<li>
<p>errors: add field Name and err</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_18">Bug fixes</h3>
<div class="ulist">
<ul>
<li>
<p>dns: split between read and write timeout for TCPClient</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_10_2_2019_12_07">share v0.10.2 (2019-12-07)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_bug_fixes_19">Bug Fixes</h3>
<div class="ulist">
<ul>
<li>
<p>dns: check for bad certificate when reading DoT request</p>
</li>
<li>
<p>dns: fix the use of goroutine on runForwarders</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_10_1_2019_12_05">share v0.10.1 (2019-12-05)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_bug_fixes_20">Bug Fixes</h3>
<div class="ulist">
<ul>
<li>
<p>dns: close the connection if receiving zero packet on serveTCPClient</p>
</li>
<li>
<p>dns: increase and decrease number of forwarders only for primary forwarders</p>
</li>
<li>
<p>dns: make the stopper channel to be buffered</p>
</li>
<li>
<p>dns: check for nil forwarder</p>
</li>
<li>
<p>dns: check for nil connection on DoTClient&#8217;s Close</p>
</li>
<li>
<p>dns: check for zero query type and class on TCPClient Lookup method</p>
</li>
<li>
<p>dns: check for nil connection on Close at TCPClient</p>
</li>
<li>
<p>dns: minimize double looping on checking error at serveTCPClient</p>
</li>
<li>
<p>git: fix the test using full path URL and repository directory</p>
</li>
<li>
<p>io: fix test using existing file instead of generate file</p>
</li>
<li>
<p>net: handle interrupted system call on epoll Wait</p>
</li>
<li>
<p>ssh: fix test ClientConfig initialize on Github Actions</p>
</li>
<li>
<p>websocket: remove test for empty endpoint due to different format</p>
</li>
<li>
<p>websocket: fix zero response ID when error on handleText</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_25">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>dns: remove the use of pointer on Message fields</p>
</li>
<li>
<p>dns: remove the use of ResourceRecord pool</p>
</li>
<li>
<p>http: add method HTTPMethod to Endpoint</p>
</li>
<li>
<p>http: disable creating Memfs if Root options is empty</p>
</li>
<li>
<p>memfs: remove unneeded call to GeneratedPathNode.Set</p>
</li>
<li>
<p>mining: move commands to root</p>
</li>
<li>
<p>websocket: add examples of WebSocket as chat server and client</p>
</li>
<li>
<p>websocket: add new function to create broadcast response</p>
</li>
<li>
<p>websocket: add field Conn to represent connection in Request</p>
</li>
<li>
<p>websocket: check for read timeout on recv</p>
</li>
<li>
<p>websocket: remove unused error on NewServer</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_10_0_2019_11_05">share v0.10.0 (2019-11-05)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_new_features_21">New Features</h3>
<div class="ulist">
<ul>
<li>
<p>dns: implement client and server for DNS over TLS</p>
</li>
<li>
<p>ini: add method GetsUniq and ValsUniq that return uniq values only</p>
</li>
<li>
<p>net: implement network polling using epoll and kqueue</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_breaking_changes_22">Breaking Changes</h3>
<div class="ulist">
<ul>
<li>
<p>dns: change the server certificate options to load from files</p>
</li>
<li>
<p>ini: change Gets return as is, with duplicate values</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_26">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>dns: allow listening on DoH without requiring certificate</p>
</li>
<li>
<p>ini: support marshaling and un-marshaling time.Duration</p>
</li>
<li>
<p>ini: support marshaling and un-marshaling time.Time</p>
</li>
<li>
<p>ini: support marshaling and un-marshaling embedded structs</p>
</li>
<li>
<p>websocket: websocket: replace epoll implementation with libnet.Poll</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_21">Bug Fixes</h3>
<div class="ulist">
<ul>
<li>
<p>dns: return error code 4 if server receive unknown message class or type</p>
</li>
<li>
<p>dns: return an error if section question contains invalid packet</p>
</li>
<li>
<p>ini: fix return value for empty string in IsValueBoolTrue</p>
</li>
<li>
<p>strings: fix logic of Split function</p>
</li>
<li>
<p>websocket: set the response ID after calling handler on handleText</p>
</li>
<li>
<p>websocket: wrap the response with frame on sendResponse</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_9_0_2019_10_08">share v0.9.0 (2019-10-08)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_new_features_22">New Features</h3>
<div class="ulist">
<ul>
<li>
<p>bytes: add function to get all indexes of word in string</p>
</li>
<li>
<p>bytes: add function to take snippets from string by indexes</p>
</li>
<li>
<p>bytes: add function to get all indexes of token in string</p>
</li>
<li>
<p>ints: add function to merge two slices by distance</p>
</li>
<li>
<p>memfs: add method to add file directly as child of root</p>
</li>
<li>
<p>memfs: add method to Search content of files</p>
</li>
<li>
<p>sanitize: new package to sanitize markup document into plain text</p>
<div class="paragraph">
<p>Current implementation have a function to sanitize the content of HTML.</p>
</div>
</li>
<li>
<p>strings: add function to convert slice of string to slice of slice of bytes</p>
</li>
<li>
<p>http: implement key binding in registered Endpoint&#8217;s Path</p>
<div class="paragraph">
<p>Previously, only raw path can be registered on Endpoint.  This changes
implement key binding using colon ":" on path.  For example, registering
path "/:x/y" will bind key "x" to a string value that can be accessed on
http.Request.Form using Get method.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_breaking_changes_23">Breaking Changes</h3>
<div class="ulist">
<ul>
<li>
<p>ini: set variable with "=" without a value default to empty string</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Previously, a variable end with "=" will have value set to "true".
For example,</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[section]
var =</pre>
</div>
</div>
<div class="paragraph">
<p>set the "var" value to string "true".</p>
</div>
<div class="paragraph">
<p>This changes make the variable that end with "=" without any value
to be an empty string, so "var" value is equal to "".</p>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_22">Bug Fixes</h3>
<div class="ulist">
<ul>
<li>
<p>ini: check for possible nil variable on Write</p>
</li>
<li>
<p>dns: allow message with non recursive-desired to be forwarded</p>
<div class="paragraph">
<p>On macOS, turn out, all DNS queries have RD flag set to zero.  This cause
no DNS queries forwarded to parent server.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_27">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>http: export the Memfs field on Server</p>
<div class="paragraph">
<p>User of HTTP can use the Memfs field to get the content manually or
to Search the content.</p>
</div>
</li>
<li>
<p>http: add content and response type HTML and XML</p>
</li>
<li>
<p>memfs: export the Decode method on Node</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_8_2_2019_09_05">share v0.8.2 (2019-09-05)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_enhancements_28">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>http: make the request body always available even after ParseForm()</p>
<div class="paragraph">
<p>Previously, if the request type is query, form, or JSON, we call the
ParseForm() to let the http.Request read the Body POST form data and fill
the Form and/or PostForm fields.  This  method will cause the request
Body will become empty since its already read and closed.
One of use case of POST with form data is to check the integrity of POST
body using checksum, which is not possible using only ParseForm().
This commit read all the body first into reqBody and recreate the request
Body back using ioutil.NopCloser and bytes.Buffer.</p>
</div>
</li>
<li>
<p>all: replace document generator from asciidoctor to ciigo</p>
<div class="paragraph">
<p>Previously, generating HTML files from asciidoc files require installing
ruby, asciidoctor, and its dependency through Gemfile.
To simplify this, we replace it with ciigo.  Ciigo not only can convert
the asciidoc files but it also support serving the file inside HTTP
server and watching changes on asciidoc files during development for
local previewing.</p>
</div>
</li>
<li>
<p>memfs: log and ignore error from NewNode</p>
<div class="paragraph">
<p>An error for calling NewNode should not stop processing all files
in directory.</p>
</div>
</li>
<li>
<p>io: log and ignore error from NewNode</p>
<div class="paragraph">
<p>An error for calling NewNode should not stop processing all files
in directory.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_8_1_2019_08_05">share v0.8.1 (2019-08-05)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_enhancements_29">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>lib/ini: add functions to marshal/unmarshal bytes from/to struct.</p>
<div class="paragraph">
<p>The format to marshal/unmarshal ini stream is behave like JSON.</p>
</div>
</li>
<li>
<p>lib/memfs: add method to encode the content of file.</p>
<div class="paragraph">
<p>The ContentEncode() method encode each node&#8217;s content into specific
encoding, in other words this method can be used to compress the content
of file in memory before being served or written.
Only file with size greater than 0 will be encoded.
List of known encoding is "gzip".</p>
</div>
</li>
<li>
<p>lib/memfs: ignore generated output filename on GoGenerate</p>
<div class="paragraph">
<p>In case the user Mount() the directory that include the generated output
file, we want that file to be excluded from .go static source.</p>
</div>
</li>
<li>
<p>lib/memfs: set the Node Size to be zero if node is directory</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_8_0_2019_07_09">share v0.8.0 (2019-07-09)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_breaking_changes_24">Breaking changes</h3>
<div class="ulist">
<ul>
<li>
<p>All ASCII related contants and functions now being moved from <code>bytes</code>
package to <code>ascii</code> package.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_new_features_23">New Features</h3>
<div class="ulist">
<ul>
<li>
<p>ascii: new library for working with ASCII characters</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_30">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>dns: add method to restart forwarders</p>
</li>
<li>
<p>dns: add fallback nameservers</p>
</li>
<li>
<p>ini: create new section or variable if not exist on Set</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_7_0_2019_06_14">share v0.7.0 (2019-06-14)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This release bring major refactoring on <code>ini</code> package to provide a clean and
simple API.</p>
</div>
<div class="sect2">
<h3 id="_breaking_changes_25">Breaking Changes</h3>
<div class="ulist">
<ul>
<li>
<p>ini: major refactoring</p>
</li>
<li>
<p>net: add parameter to check Fully Qualified Domain Name on IsHostnameValid</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_new_features_24">New Features</h3>
<div class="ulist">
<ul>
<li>
<p>spf: implementation of Sender Policy Framework (RFC 7208)</p>
</li>
<li>
<p>ssh: package ssh provide a wrapper to golang.org/x/crypto/ssh</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_31">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>dns: add function to lookup PTR record by IP address</p>
</li>
<li>
<p>dns: export Lookup method as part of Client interface</p>
</li>
<li>
<p>doc: regenerate to use new style</p>
</li>
<li>
<p>http: print the not-found path on Server&#8217;s getFSNode()</p>
</li>
<li>
<p>ini: add method Vars that return all variables as map</p>
</li>
<li>
<p>ini: add method to Rebase other INI object</p>
</li>
<li>
<p>ini: add method to add, set, and unset variable</p>
</li>
<li>
<p>ini: add method to convert key-value to map</p>
</li>
<li>
<p>ini: add method to get section object by section and/or subsection name</p>
</li>
<li>
<p>ini: add method to get variable values as slice of string</p>
</li>
<li>
<p>ini: add method to prune INI variables</p>
</li>
<li>
<p>ini: add methods to support templating</p>
</li>
<li>
<p>io: add function to check if content of file is binary</p>
</li>
<li>
<p>net: add function to check if IP address is IPv4 or IPv6</p>
</li>
<li>
<p>net: add function to convert IPv6 into dot format</p>
</li>
<li>
<p>ns: set log flag to 0, without time prefix</p>
</li>
<li>
<p>strings: add function to append uniq values to slice of strings</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_23">Bug Fixes</h3>
<div class="ulist">
<ul>
<li>
<p>io: watch changes on sub of sub directories on DirWatcher</p>
</li>
<li>
<p>dns: substract the message TTL when the answer found on cache</p>
</li>
<li>
<p>dns: always return true when answers RR exist and no TTL is zero</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_6_1_2019_05_11">share v0.6.1 (2019-05-11)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><code>memfs</code>:</p>
<div class="ulist">
<ul>
<li>
<p>fix empty list names from MemFS created from GeneratedPathNode</p>
</li>
<li>
<p>set root if GeneratedPathNode is not empty</p>
</li>
<li>
<p>sort the generated file names</p>
</li>
<li>
<p>fix template when generating empty content</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_6_0_2019_05_07">share v0.6.0 (2019-05-07)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This release bring major changes on dns package.
Most notable changes are adding caches and query forwarding (recursion), and
removing the server handler.</p>
</div>
<div class="sect2">
<h3 id="_breaking_changes_26">Breaking Changes</h3>
<div class="ulist">
<ul>
<li>
<p><code>dns</code>:</p>
<div class="ulist">
<ul>
<li>
<p>refactor server to use Start(), Wait(), and Stop()</p>
</li>
<li>
<p>use direct certificate instance on ServerOptions</p>
</li>
<li>
<p>rename Send to Write, and change the parameter type to slice of byte</p>
</li>
<li>
<p>remove "elapsed" parameter on Message.IsExpired()</p>
</li>
<li>
<p>unexport the Request type</p>
</li>
<li>
<p>remove receiver interface</p>
</li>
<li>
<p>unexport connection type</p>
</li>
<li>
<p>remove unused address parameter on client&#8217;s Query()</p>
</li>
<li>
<p>unexport all fields from UDP and TCP clients</p>
</li>
<li>
<p>remove TCPPort on ServerOptions</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>http</code>:</p>
<div class="ulist">
<ul>
<li>
<p>change server initialization using options</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>io</code>:</p>
<div class="ulist">
<ul>
<li>
<p>simplify Watcher to use callback instead of channel</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>memfs</code>:</p>
<div class="ulist">
<ul>
<li>
<p>refactoring go generate file to use type from memfs</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_new_features_25">New Features</h3>
<div class="ulist">
<ul>
<li>
<p><code>crypto</code>: new package that provide a wrapper for standard crypto library</p>
</li>
<li>
<p><code>dns</code>:</p>
<div class="ulist">
<ul>
<li>
<p>add caches to server</p>
</li>
<li>
<p>add method to set AA, Query, RD, RCode on Message</p>
</li>
<li>
<p>add mapping of response code to human readable names</p>
</li>
<li>
<p>implement recursion, forwarding request to parent name servers</p>
</li>
<li>
<p>check for zero TTL on authorities and additionals RR on IsExpired</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>io</code>:</p>
<div class="ulist">
<ul>
<li>
<p>implement naive directory change notification, DirWatcher</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>memfs</code>:</p>
<div class="ulist">
<ul>
<li>
<p>add parameter to make reading file content become optional</p>
</li>
<li>
<p>add method to unmount directory</p>
</li>
<li>
<p>add method to check if memfs contains mounted directory</p>
</li>
<li>
<p>add method to update node content and information</p>
</li>
<li>
<p>export the method to add new child</p>
</li>
<li>
<p>add method to remove child from any node</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>smtp</code>: add field DKIMOptions to Domain</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_bug_fixes_24">Bug Fixes</h3>
<div class="ulist">
<ul>
<li>
<p><code>dns</code>:</p>
<div class="ulist">
<ul>
<li>
<p>fix data race issue when running test</p>
</li>
<li>
<p>set the TTL offset when packing resource record</p>
</li>
<li>
<p>fix parsing TXT from zone file</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>http</code>:</p>
<div class="ulist">
<ul>
<li>
<p>allow serving directory with slash</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>memfs</code>:</p>
<div class="ulist">
<ul>
<li>
<p>fix possible invalid system path on file with symbolic link</p>
</li>
<li>
<p>refresh the directory tree in Development mode if page not found</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_documentation">Documentation</h3>
<div class="ulist">
<ul>
<li>
<p>add documentation for Sender Policy Framework (RFC 7208)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_5_0_2019_04_02">share v0.5.0 (2019-04-02)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This minor release is dedicated for websocket package.  Major refactoring on
server and client API to make it easy and extensible.  The websocket is now
100% pass the autobahn testsuite (minus compression feature).</p>
</div>
<div class="sect2">
<h3 id="_new_features_26">New Features</h3>
<div class="ulist">
<ul>
<li>
<p><code>cmd/smtpcli</code>: command line interface to SMTP client protocol</p>
</li>
<li>
<p><code>ints</code>: new package for working with slice of integer</p>
</li>
<li>
<p><code>ints64</code>: new package for working with slice of 64 bit integer</p>
</li>
<li>
<p><code>floats64</code>: new package for working with slice of 64 bit float</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_32">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p><code>bytes</code>:</p>
<div class="ulist">
<ul>
<li>
<p>change the Copy return type to non pointer</p>
</li>
<li>
<p>add function to concat slice of byte or string into []byte</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>ints</code>: add function to remove value from slice</p>
</li>
<li>
<p><code>websockets</code>:</p>
<div class="ulist">
<ul>
<li>
<p>Rewrite most of client and server APIs to be more simple and pass autobahn
testsuite</p>
</li>
<li>
<p>Minimize global variables and unexport internal constants and functions</p>
</li>
<li>
<p>Handle interjected PING control frame from server</p>
</li>
<li>
<p>Generate random mask only if masked field is set</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_4_0_2019_03_01">share v0.4.0 (2019-03-01)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_new_features_27">New Features</h3>
<div class="ulist">
<ul>
<li>
<p><code>email</code>: new package for working with Internet Message Format (RFC 5322)</p>
</li>
<li>
<p><code>email/dkim</code>: new package for parsing and creating DKIM signature
(RFC 6376)</p>
</li>
<li>
<p><code>email/maildir</code>: new package to manage email using maildir format</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_33">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p><code>bytes</code>
</p>
<div class="ulist">
<ul>
<li>
<p>add function to copy slice</p>
</li>
<li>
<p>add function to convert hexadecimal into byte</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>dns</code>
</p>
<div class="ulist">
<ul>
<li>
<p>add mapping of connection types and its names</p>
</li>
<li>
<p>print the section question type by string</p>
</li>
<li>
<p>add method to filter Message.Answer by specific query type</p>
</li>
<li>
<p>add pool for UDP client</p>
</li>
<li>
<p>add function to get list of system name servers</p>
</li>
<li>
<p>make UDPClient Query routine safe</p>
</li>
<li>
<p>increase the internal debug level from 2 to 3</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>http</code>
</p>
<div class="ulist">
<ul>
<li>
<p>add the charset type to content-type "text/plain"</p>
</li>
<li>
<p>listen and serve using TLS if TLSConfig is defined</p>
</li>
<li>
<p>add method to temporary redirect request to other location</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>ini</code>
</p>
<div class="ulist">
<ul>
<li>
<p>unexport the reader</p>
</li>
<li>
<p>add method to get all variable values with the same key</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>io</code>
</p>
<div class="ulist">
<ul>
<li>
<p>rename Reader SkipSpace to SkipSpaces</p>
</li>
<li>
<p>refactoring, export all fields for easy access on Reader</p>
</li>
<li>
<p>add method read one line with line feed</p>
</li>
<li>
<p>add method to unread N characters on Reader</p>
</li>
<li>
<p>optimize ReadUntil without append</p>
</li>
<li>
<p>add method to return the rest of unreaded buffer on Reader</p>
</li>
<li>
<p>return the character separator that found on SkipUntil</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>memfs</code>
</p>
<div class="ulist">
<ul>
<li>
<p>add method to dump files as Go generated source</p>
</li>
<li>
<p>add variable for allowing bypass file in memory</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>smtp</code> (work in progress)</p>
<div class="ulist">
<ul>
<li>
<p>rename StorageFile to LocalStorage</p>
</li>
<li>
<p>implement server with local handler</p>
</li>
<li>
<p>add prefix Mail to methods in Storage interface</p>
</li>
<li>
<p>use different port between normal listener and TLS listener</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>time</code>:  add function to get micro seconds</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_fixes">Fixes</h3>
<div class="ulist">
<ul>
<li>
<p>all: fix the usage of "iota"</p>
</li>
<li>
<p><code>dns</code>: fix creating new UDP/TCP client without port number</p>
</li>
<li>
<p><code>memfs</code>: check for empty directory on Mount</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_3_0_2019_02_01">share v0.3.0 (2019-02-01)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_features_changes">Features Changes</h3>
<div class="ulist">
<ul>
<li>
<p><code>lib/debug</code>: add function to write heap profile to file</p>
</li>
<li>
<p><code>lib/debug</code>: add type to store relative and difference on memory heap</p>
</li>
<li>
<p><code>lib/dns</code>: remove request pool</p>
</li>
<li>
<p><code>lib/dns</code>: export the connection field on UDPClient</p>
</li>
<li>
<p><code>lib/dns</code>: add type of connection</p>
</li>
<li>
<p><code>lib/http</code>: add parameter http.ResponseWriter to Callback.</p>
</li>
<li>
<p><code>lib/http</code>: the RegisterXxx functions now use the Endpoint type.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_34">Enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>Various fixes suggested by linters</p>
</li>
<li>
<p>doc: add four summary and notes about DKIM</p>
</li>
<li>
<p>doc: add summary of Simple Authentication and Security Layer (SASL)</p>
</li>
<li>
<p>doc: add summary on SMTP over TLS (RFC3207)</p>
</li>
<li>
<p>doc: add notes for Internet Message Format (RFC 5322)</p>
</li>
<li>
<p>doc: add documentation for SMTP and DSN</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_fixes_1">Fixes</h3>
<div class="ulist">
<ul>
<li>
<p><code>lib/git</code>: fix testdata and test input</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_2_0_2019_01_02">share v0.2.0 (2019-01-02)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_new_features_28">New Features</h3>
<div class="ulist">
<ul>
<li>
<p><code>lib/errors</code>, package errors provide a custom error with code.</p>
</li>
<li>
<p><code>lib/http</code>, package http implement custom HTTP server with memory file
system and simplified routing handler.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_enhancements_35">Enhancements</h3>
<div class="paragraph">
<p>Fix warnings from linters.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share_v0_1_0_2018_11_29">share v0.1.0 (2018-11-29)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The first release of <code>share</code> package contains one command line interface (CLI)
and several libraries.</p>
</div>
<div class="paragraph">
<p>The CLI is <code>gofmtcomment</code> to convert comment from <code>/**/</code> to <code>//</code>.</p>
</div>
<div class="paragraph">
<p>The libraries are <code>bytes</code>, <code>contact</code>, <code>dns</code>, <code>dsv</code>, <code>ini</code>, <code>io</code>, <code>memfs</code>,
<code>mining</code>, <code>net</code>, <code>numbers</code>, <code>runes</code>, <code>strings</code>, <code>tabula</code>, <code>test</code>, <code>text</code>,
<code>time</code>, and <code>websocket</code>.</p>
</div>
<div class="paragraph">
<p>Documentation for each package can be viewed at,</p>
</div>
<div class="literalblock">
<div class="content">
<pre>https://godoc.org/github.com/shuLhan/share</pre>
</div>
</div>
<div class="paragraph">
<p>I hope it will be stay alive!</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-02-06 13:17:08 +0700
</div>
</div>
			</div>
			
		</div>
		

		<div class="footer">
			Powered by <a
				href="https://git.sr.ht/~shulhan/ciigo"
			>
				ciigo
			</a>
		</div>
	</body>
</html>